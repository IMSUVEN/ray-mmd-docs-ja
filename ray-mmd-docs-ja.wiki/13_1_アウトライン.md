# 13.アウトライン

ray-mmdでアウトライン（エッジ）を描画します。  
仕組み的には、MMDが標準で持っているエッジと同じく、反転ポリゴンを少し拡大して任意の色で描画します。  
MMDの「表示」-「エッジ太さ」メニューで太さを調整できます。

* ### 使い方  
1. ray.confで、`OUTLINE_QUALITY` に、デフォルトの `0` 以外を設定します。  
    既にray-mmdをMMDに入れている時にray.confを書き換えた場合は、自動で設定が反映されないので、MMEのメニューから「全て更新」を選択して、設定を反映させます。  

    * `OUTLINE_QUALITY`の設定:  
        MMEの「エフェクト割当」で表示されるタブに「OutlineMap」タブを追加するかどうか。  

        `0` ：追加しない　(デフォルト)  
        `1` ：追加する  
        `2` ：追加する + SMAA  
        `3` ：追加する + SSAA  

2. 「エフェクト割当」で表示される「OutlineMap」タブに `Outline`フォルダにあるfxを割り当てます。

* ### Outlineフォルダと設定  
    　Outlineフォルダにはアウトライン（エッジ）描画用のプリセットが有ります。設定を書き換える事により、オリジナルの描画用のプリセットを作ることが出来ます。

    | 設定                                     | Fixed Color | Fixed Color x1 | Fixed Color x2 | Fixed Color x3 | 説明 |
    | :--------------------------------------- | :---------: | :------------: | :------------: | :------------: | :--- |
    | static float edgeLinePadding             | 0           | 1              | 2              | 3              | アウトラインの太さ |
    | static float edgeLineDepthBias           | 0           | 0              | 0              | 0              | 深度バイアス <br> Z方向のバイアスをかけることによって、アウトラインをよりはっきりと描画させることが可能になる。ただし、厚みが薄いオブジェクトは面全体がエッジで描画される可能性がある。 |
    | static float edgeLineDepthSlopeScaleBias | 1           | 1              | 1              | 1              | 深度傾斜バイアス <br> 深度の傾斜に応じてバイアスをかける。カメラから見て横方向を向いている面に有効。
    | static float3 edgeLineColor              |             |                |                |                | アウトラインの色 |


    | edgeLinePadding 0 | edgeLinePadding 1 | edgeLinePadding 2 | edgeLinePadding 3 |
    | :- | :- | :- | :- |
    | [![13_edgeLinePadding_0](images/13_edgeLinePadding_0.png)](images/13_edgeLinePadding_0.png) | [![13_edgeLinePadding_1](images/13_edgeLinePadding_1.png)](images/13_edgeLinePadding_1.png) | [![13_edgeLinePadding_2](images/13_edgeLinePadding_2.png)](images/13_edgeLinePadding_2.png) | [![13_edgeLinePadding_3](images/13_edgeLinePadding_3.png)](images/13_edgeLinePadding_3.png) |

    ※ 他の設定は、`OUTLINE_QUALITY  1` 、`edgeLineDepthBias = 0`、`edgeLineDepthSlopeScaleBias = 1` です。

    | edgeLineDepthBias 0.0 | edgeLineDepthBias 0.0002 | edgeLineDepthBias 0.0004 | edgeLineDepthBias 0.0006 |
    | :- | :- | :- | :- |
    | [![13_edgeLineDepthBias_0](images/13_edgeLineDepthBias_0.png)](images/13_edgeLineDepthBias_0.png) | [![13_edgeLineDepthBias_2](images/13_edgeLineDepthBias_2.png)](images/13_edgeLineDepthBias_2.png) | [![13_edgeLineDepthBias_4](images/13_edgeLineDepthBias_4.png)](images/13_edgeLineDepthBias_4.png) | [![13_edgeLineDepthBias_6](images/13_edgeLineDepthBias_6.png)](images/13_edgeLineDepthBias_6.png) |

    ※ 他の設定は、`OUTLINE_QUALITY  1` 、`edgeLinePadding = 0`、`edgeLineDepthSlopeScaleBias = 0` です。

    | edgeLineDepthSlopeScaleBias 0.0 | edgeLineDepthSlopeScaleBias 1.0 | edgeLineDepthSlopeScaleBias 2.0 | edgeLineDepthSlopeScaleBias 3.0 |
    | :- | :- | :- | :- |
    | [![13_edgeLineDepthSlopeScaleBias_0](images/13_edgeLineDepthSlopeScaleBias_0.png)](images/13_edgeLineDepthSlopeScaleBias_0.png) | [![13_edgeLineDepthSlopeScaleBias_1](images/13_edgeLineDepthSlopeScaleBias_1.png)](images/13_edgeLineDepthSlopeScaleBias_1.png) | [![13_edgeLineDepthSlopeScaleBias_2](images/13_edgeLineDepthSlopeScaleBias_2.png)](images/13_edgeLineDepthSlopeScaleBias_2.png) | [![13_edgeLineDepthSlopeScaleBias_3](images/13_edgeLineDepthSlopeScaleBias_3.png)](images/13_edgeLineDepthSlopeScaleBias_3.png) |

    ※ 他の設定は、`OUTLINE_QUALITY  1` 、`edgeLinePadding = 0`、`edgeLineDepthBias = 0` です。

-----

<small> Model : Hatsune Miku V4X Model by Digitrevx </small>