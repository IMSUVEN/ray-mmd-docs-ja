# 3.フォルダの説明

　ray-mmd developingの各フォルダとファイルの概略説明です。概ねどのようなものが有るかが分かる程度の説明です。

* ## ルートフォルダ

    | ファイル名         | 説明 |
    | :----------------- | :--- |
    | LICENSE.txt        | ライセンスの書かれたテキスト。<br>ray-mmdはMITライセンスで配布されています。 |
    | `README.md`        | リードミー。<br>内容は配布ページに同じものが表示されています。<br>マークダウン形式で書かれていて、テキストエディタで読めますが、マークダウン形式のプレビューに対応したエディタやブラウザのプラグインを使うと、より読みやすくなります。 |
    | ray.conf           | ray-mmdのグローバル設定。<br>必要に応じてパラメータを書き換えます。<br>詳細は「5.グローバル設定」を参照してください。 |
    | ray_advanced.conf  | ray-mmdのグローバル設定。<br>こちらは特に書き換える必要は無いと思いますが、内容がわかれば書き換える事により、より細かな設定ができます。 |
    | ray.x              | ray.fxをMMDに読み込ませるためのファイル |
    | ray.fx             | ray-mmd本体 |
    | ray_controller.pmx | ray-mmd用のコントローラー<br> 詳細は「6.ray_controller」を参照してください |

* ## Extensionフォルダ  

    * 　追加のエフェクト等のフォルダ。多くのものは別プロジェクトになっており、 ray-mmd専用でないものは、単体で使用できます。詳細は「14.エクステンション」を参照してください。  
    ライトブルームとアンチエイリアス、色調補正はray-mmd本体に組み込まれたものもあります。これらについては、「5.グローバル設定」「6.ray_controller」を参照してください。

    | フォルダ名    | 説明                                             | ray-mmd専用？ |
    | :------------ | :----------------------------------------------- | :------------ |
    | ColorGrading  | 色調整用                                         | No            |
    | Debug         | デバッグ用                                       | Yes           |
    | DummyScreen   | MMDのスクリーン用キャプチャを行う                | Yes           |
    | FXAA          | アンチエイリアス                                 | No            |
    | LightBloom    | 明るい部分が周囲に溢れ出す現象を模したエフェクト | No            |
    | OpticalFlares | レンズフレアを模したエフェクト                   | No            |
    | SMAA          | アンチエイリアス                                 | No            |
    | Spectrum      | サウンドの周波数を元にしたビジュアルエフェクト   | No            |
    | StereoImage   | 立体視エフェクト                                 | No            |

* ## Fogフォルダ
    * フォグ（霧）の効果を追加します。詳細については「10.フォグ」を参照してください。

    | ファイル名           | 説明                                  |
    | :------------------- | :------------------------------------ |
    | AtmosphericFog.pmx   | 大気フォグ                            |
    | GroundFog.pmx        | 地面（高さ）フォグ                    |
    | VolumetricCube.pmx   | ボリュームフォグ　キューブ型          |
    | VolumetricSphere.pmx | ボリュームフォグ　球状                |


* ## Lightingフォルダ
    * 追加用の光源。詳細については「9.ライト」を参照してください。

    | ファイル名           | 説明                                  |
    | :------------------- | :------------------------------------ |
    | DirectionalLight.pmx | 指向性ライト                          |
    | LED.pmx              | 画像や動画を表示する平面ライト        |
    | PointLight.pmx       | ポイントライト                        |
    | PointLightIES.pmx    | IES(配光データ)に基づくポイントライト |
    | RectangleLight.pmx   | 矩形の平面ライト                      |
    | SphereLight.pmx      | 球状のライト                          |
    | SpotLight.pmx        | スポットライト                        |
    | SpotLightIES.pmx     | IES(配光データ)に基づくスポットライト |
    | TubeLight.pmx        | チューブ型のライト                    |

* ## Mainフォルダ

    * 　MMEの「Main」タブに設定用の.fx。.fx内の設定パラメータについては「11.Main」を参照してください。

    | ファイル名             | 説明 |
    | :--------------------- | :--- |
    | main.fx                | デフォルトで設定するファイル |
    | main.fxsub             | main用のコード。ユーザーが編集する必要は無い。 |
    | main_ex_alpha.fx       | main_ex_～はmain.fxのパラメータを書き換えたプリセット |
    | main_ex_mask.fx        |  |
    | main_ex_noalpha.fx     |  |
    | main_ex_with_sphmap.fx |  |

* ## Materialsフォルダ
    * モデルの見た目、質感を決定するマテリアル（材質）設定のプリセットがあり、「MaterialMap」タブに設定します。よりモデルに合った質感を設定するには、fxファイルの中身を編集する必要があるでしょう。詳細については「8.マテリアル」を参照してください。

    | ファイル名                | 説明             |
    | :------------------------ | :--------------- |
    | material_2.0.fx           | デフォルトのマテリアル設定ファイル |
    | material_common_2.0.fxsub | マテリアル用のコード |
    | material_skybox.fx        | スカイボックス用のマテリアル |
    | `README.md`                 | マテリアルファイルの設定が書かれたファイル(英語) |
    | README_chs.md             | マテリアルファイルの設定が書かれたファイル(中国語) |

    | フォルダ名   | 説明                                         |
    | :----------- | :------------------------------------------- |
    | _MaterialMap | マテリアル用のマップファイル                 |
    | ClearCoat    | クリアコートのプリセットマテリアル           |
    | Cloth        | 布のプリセットマテリアル                     |
    | Editor       | コントローラーで設定値を変更できるマテリアル |
    | Emissive     | エミッシブ(発光表現)のプリセットマテリアル   |
    | Hair         | 髪用のプリセットマテリアル                   |
    | Metallic     | メタリックのプリセットマテリアル             |
    | Programmable | 海、ウェット表現のマテリアル                 |
    | Skin         | 肌用のプリセットマテリアル                   |
    | Subsurface   | サブサーフェスのプリセットマテリアル         |
    | Transparent  | 透過のプリセットマテリアル                   |
    | Video        | ビデオ・スクリーン用のプリセットマテリアル   |

* ## Outlineフォルダ
    * アウトライン(エッジ)描画用。「OutlineMap」タブ（ray.confの設定が必要）に設定します。詳細については「13.アウトライン」を参照してください。

    | ファイル名     | 説明             |
    | :------------- | :--------------- |
    | Fixed Color    | 各フォルダには線の太さと色が違うプリセットがある |
    | Fixed Color x1 |  |
    | Fixed Color x2 |  |
    | Fixed Color x3 |  |


* ## Shaderフォルダ
    * ray-mmdのレンダリングに必要なコード。ユーザーが編集する必要はありません。

* ## Shadowフォルダ
    * PSSMとSSAO用の設定用.fx。詳細は「12.シャドウ」を参照してください。

    | ファイル名                  | 説明             |
    | :-------------------------- | :--------------- |
    | PSSM1～4.fx                 | PSSMの設定       |
    | SSAO visibility 0.0～1.0.fx | SSAOの濃さを「SSAOMap」タブに設定<br>デフォルトは1.0 |

* ## Skyboxフォルダ
    * MMDで言うところのスカイドームの代わりになるもの。Skyboxからの光の強さを環境光として使用しています。幾つかのSkyboxが有りますが、イメージベースのものは自作することも可能です。  
    詳細については「7.スカイボックス」を参照してください。

    | フォルダ名         | 説明             |
    | :----------------- | :--------------- |
    | Helipad GoldenHour | イメージベースのSkybox |
    | Sky Hemisphere     | 高さ（ハイ、ミッド、ロー）で色が変えられるSkybox<br>単色やグラデーションの背景の代わりにもなる |
    | Sky Night          | 星空のSkybox |
    | Time of day        | 昼間のSkybox　流れる雲がある |
    | Time of night      | 夜空のSkybox　流れ星がある |

* ## Toolsフォルダ
    * ray-mmdが使用するファイルを作成（変換）するツール。詳細は「15.Tools」を参照してください。

    | ファイル名          | 説明             |
    | :------------------ | :--------------- |
    | cmft_rgbt_x1024.zip | HDRをSkybox用に変換するツール。|
    | IES2HDR.zip         | IES(配光データ)ファイルをHDRに変換するツール。<br>ポイントライト、スポットライトで使用できる。 |
