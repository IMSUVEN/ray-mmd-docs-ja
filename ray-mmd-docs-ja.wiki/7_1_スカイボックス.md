# 7.スカイボックス

　MMDで言うところのスカイドームの代わりになるもの。Skyboxからの光の強さを環境光として使用しています。幾つかのSkyboxが有りますが、イメージベースのものは自作することも可能です。  
　標準で入っているスカイボックスは5種類。ここでは各スカイボックスについて解説していきます。  

* Tips:  
　スカイボックスのpmxはコントローラーになっています。MMD全般の話ですが、コントローラーを調整する時は、「表示」メニューの「モデル編集時カメラ・照明追従」をオンにし、ボーン操作パネルの「選択」ボタンをオフ（ショートカット：Cキー）にしておくと調整がやりやすいと思います。  

スカイボックス一覧
-----

ray-mmdには以下のスカイボックスが標準であります。

| フォルダ名         | 説明             |
| :----------------- | :--------------- |
| Helipad GoldenHour | イメージベースのスカイボックス |
| Sky Hemisphere     | ハイ、ミッド、ローで色が変えられるSkybox<br>単色やグラデーションの背景の代わりにもなる |
| Sky Night          | 星空のSkybox　Sky Hemisphereに星空を足したもの |
| Time of day        | 昼間のSkybox　流れる雲がある |
| Time of night      | 夜空のSkybox　流れ星がある |

Helipad GoldenHour
-----
　イメージベースのサンプル的なスカイボックス。イメージベースのスカイボックスは自作することも可能です。(詳細は「15.Tools」を参照してください。)  

| 前面 | 背面 |
| :- | :- |
| ![7_1_HelipadGoldenHour_1](images/7_1_HelipadGoldenHour_1.png) | ![7_1_HelipadGoldenHour_1_2](images/7_1_HelipadGoldenHour_1_2.png) |


　因みにこのスカイボックス、Marriottホテルのロゴを見ても判るように、画像が左右反対になっています。理由は、OpenGLとDirectXは座標系が違うためで、配布されているHDRIの多くはOpenGLに準拠したものが多いからです。  
　そのような画像を使う場合、HDRIが扱えるペイントソフトで左右を反転してツールでスカイボックスを作り直すか、`ray.conf`の`IBL_QUALITY`に`2`を設定することで解決出来ます。

* ### ファイル一覧  
    「Main」タブは表示用、「EnvLightMap」タブはライティング用。「with rotation」が付いているものはスカイボックスのモーフで回転が可能です。

    | ファイル名                         | 設定先タブ  | 説明 |
    | :--------------------------------- | :---------: | :- |
    | Sky with box blur with rotation.fx | Main        | Sky with box blurの回転対応版 |
    | Sky with box blur.fx               | Main        | スカイボックスにぼかしがかかった状態で表示される |
    | Sky with box with rotation.fx      | Main        | Sky with boxの回転対応版 |
    | Sky with box.fx                    | Main        | pmxを入れた時にデフォルトで設定される |
    | Sky with box.pmx                   | ――        | スカイボックスのモデル兼コントローラー |
    | Sky with dome with rotation.fx     | Main        | Sky with domeの回転対応版 |
    | Sky with dome.fx                   | Main        | 半球状のドームのように表示される |
    | Sky with lighting fast.fx          | EnvLightMap | Sky with lighting.fxからいくつかのコントローラー用の処理を省いたもの <br>コントローラーの対応はEnvDiffLight・EnvSpecLight・EnvSSSLightのみ|
    | Sky with lighting with rotation.fx | EnvLightMap | 「Main」タブ用の「with rotation」が付いているものを使う時は、これを「EnvLightMap」に割り当てます。 |
    | Sky with lighting.fx               | EnvLightMap | 標準のライティング用 |

* ### Main用の表示例

    | Sky with box.fx | Sky with dome.fx | Sky with box blur.fx |
    | :- | :- | :- |
    | [![7_1_HelipadGoldenHour_1](images/7_1_HelipadGoldenHour_1.png)](images/7_1_HelipadGoldenHour_1.png) | [![7_1_HelipadGoldenHour_2](images/7_1_HelipadGoldenHour_2.png)](images/7_1_HelipadGoldenHour_2.png) | [![7_1_HelipadGoldenHour_3](images/7_1_HelipadGoldenHour_3.png)](images/7_1_HelipadGoldenHour_3.png) |

    ※ 視野角90°

* ### 使い方
    1.  `Sky with box.pmx`をMMDに追加します。  
        「Main」タブには`Sky with box.fx`、「MaterialMap」には`Materials\material_skybox.fx`が割り当てられます。  
    2.  MMDの「モデル描画順」で一番上に。  
        (これはスカイボックス共通の操作)
    3.  上記の表ので「EnvLightMap」用のfxを「EnvLightMap」に割り当てます。
    4.  必要があれば、blurやdomeなど、「Main」用のfxを「Main」タブに割り当てます。

    * Main用とEnvLightMap用の対応表

        | Main                               | EnvLightMap                                   |
        | :--------------------------------- | :-------------------------------------------- |
        | Sky with box.fx                    | Sky with lighting.fx / Sky with lighting fast |
        | Sky with box with rotation.fx      | Sky with lighting with rotation.fx            |
        | Sky with dome.fx                   | Sky with lighting.fx / Sky with lighting fast |
        | Sky with dome with rotation.fx     | Sky with lighting with rotation.fx            |
        | Sky with box blur.fx               | Sky with lighting.fx / Sky with lighting fast |
        | Sky with box blur with rotation.fx | Sky with lighting with rotation.fx            |


* ### コントローラの説明
    * ### 表情操作パネル 左上  
        スカイボックスの表示上のバランス(色調補正)。環境光のライティングには影響しません。  
        ※ 画像は全てメインライトをオフにして、環境光のみにしています。

        * ### BalanceR+ / BalanceG+ / BalanceB+  
            RGB加算。  

            | default | BalanceR+ | BalanceG+ | BalanceB+ |
            | :- | :- | :- | :- |
            | [![7_1_Balance_0](images/7_1_Balance_0.png)](images/7_1_Balance_0.png) | [![7_1_BalanceR_1](images/7_1_BalanceR_1.png)](images/7_1_BalanceR_1.png) | [![7_1_BalanceG_1](images/7_1_BalanceG_1.png)](images/7_1_BalanceG_1.png) | [![7_1_BalanceB_1](images/7_1_BalanceB_1.png)](images/7_1_BalanceB_1.png) |

        * ### BalanceR- / BalanceG- / BalanceB-  
            RGB減算。  

            | default | BalanceR+ | BalanceG+ | BalanceB+ |
            | :- | :- | :- | :- |
            | [![7_1_Balance_0](images/7_1_Balance_0.png)](images/7_1_Balance_0.png) | [![7_1_BalanceR_2](images/7_1_BalanceR_2.png)](images/7_1_BalanceR_2.png) | [![7_1_BalanceG_2](images/7_1_BalanceG_2.png)](images/7_1_BalanceG_2.png) | [![7_1_BalanceB_2](images/7_1_BalanceB_2.png)](images/7_1_BalanceB_2.png) |

        * ### BalanceGray+
            グレイ化(彩度下げ)

            | default | BalanceGray+ |
            | :- | :- |
            | [![7_1_Balance_0](images/7_1_Balance_0.png)](images/7_1_Balance_0.png) | [![7_1_BalanceGray_1](images/7_1_BalanceGray_1.png)](images/7_1_BalanceGray_1.png) |

    * ### 表情操作パネル 右上  
        環境光の強弱と回転

        * ### EnvDiffLight+ / EnvDiffLight-
            アルベド(Diffuse)に対して影響を及ぼす光の強さ

            | マテリアル | EnvDiffLight+ | EnvDiffLight ±0 | EnvDiffLight- |
            | :- | :- | :- | :- |
            | SSS無し | [![7_1_EnvDiffLight_woSSS_1](images/7_1_EnvDiffLight_woSSS_1.png)](images/7_1_EnvDiffLight_woSSS_1.png) | [![7_1_EnvDiffLight_woSSS_0](images/7_1_EnvDiffLight_woSSS_0.png)](images/7_1_EnvDiffLight_woSSS_0.png) | [![7_1_EnvDiffLight_woSSS_2](images/7_1_EnvDiffLight_woSSS_2.png)](images/7_1_EnvDiffLight_woSSS_2.png) |
            | SSS有り | [![7_1_EnvDiffLight_1](images/7_1_EnvDiffLight_1.png)](images/7_1_EnvDiffLight_1.png) | [![7_1_Balance_0](images/7_1_Balance_0.png)](images/7_1_Balance_0.png) | [![7_1_EnvDiffLight_2](images/7_1_EnvDiffLight_2.png)](images/7_1_EnvDiffLight_2.png) |

        * ### EnvSpecLight+ / EnvSpecLight-
            スペキュラに対して影響を及ぼす光の強さ

            | EnvSpecLight+ | EnvSpecLight ±0 | EnvSpecLight- |
            | :- | :- | :- |
            | [![7_1_EnvSpecLight_1](images/7_1_EnvSpecLight_1.png)](images/7_1_EnvSpecLight_1.png) | [![7_1_Balance_0](images/7_1_Balance_0.png)](images/7_1_Balance_0.png) | [![7_1_EnvSpecLight_2](images/7_1_EnvSpecLight_2.png)](images/7_1_EnvSpecLight_2.png) |

        * ### EnvSSSLight+ / EnvSSSLight-
            SSSに対して影響を及ぼす光の強さ（SSSのマテリアルでないと意味はない）

            | EnvSSSLight+ | EnvSSSLight ±0 | EnvSSSLight- |
            | :- | :- | :- |
            | [![7_1_EnvSSSLight_1](images/7_1_EnvSSSLight_1.png)](images/7_1_EnvSSSLight_1.png) | [![7_1_Balance_0](images/7_1_Balance_0.png)](images/7_1_Balance_0.png) | [![7_1_EnvSSSLight_2](images/7_1_EnvSSSLight_2.png)](images/7_1_EnvSSSLight_2.png) |

        * ### EnvRotateX / EnvRotateY / EnvRotateZ
            スカイボックスを回転します。（with rotation付きのfxを割り当てていないと機能しません）

            | EnvRotateX | EnvRotateY | EnvRotateZ |
            | :- | :- | :- |
            | [![7_1_EnvRotateX_1](images/7_1_EnvRotateX_1.png)](images/7_1_EnvRotateX_1.png) | [![7_1_EnvRotateY_1](images/7_1_EnvRotateY_1.png)](images/7_1_EnvRotateY_1.png) | [![7_1_EnvRotateZ_1](images/7_1_EnvRotateZ_1.png)](images/7_1_EnvRotateZ_1.png) |

            ※ 表示のみでなく、環境光の方向が変わっていることにも注目。

    * ### 表情操作パネル 左下  
        ライティング(Diffuse)の色調補正

        * ### DiffuseR+ / DiffuseG+ / DiffuseB+
            RGB加算

            | default | DiffuseR+ | DiffuseG+ | DiffuseB+ |
            | :- | :- | :- | :- |
            | [![7_1_Diffuse_0](images/7_1_Diffuse_0.png)](images/7_1_Diffuse_0.png) | [![7_1_DiffuseR_1](images/7_1_DiffuseR_1.png)](images/7_1_DiffuseR_1.png) | [![7_1_DiffuseG_1](images/7_1_DiffuseG_1.png)](images/7_1_DiffuseG_1.png) | [![7_1_DiffuseB_1](images/7_1_DiffuseB_1.png)](images/7_1_DiffuseB_1.png) |

        * ### DiffuseR- / DiffuseG- / DiffuseB-
            RGB減算

            | default | DiffuseR- | DiffuseG- | DiffuseB- |
            | :- | :- | :- | :- |
            | [![7_1_Diffuse_0](images/7_1_Diffuse_0.png)](images/7_1_Diffuse_0.png) | [![7_1_DiffuseR_2](images/7_1_DiffuseR_2.png)](images/7_1_DiffuseR_2.png) | [![7_1_DiffuseG_2](images/7_1_DiffuseG_2.png)](images/7_1_DiffuseG_2.png) | [![7_1_DiffuseB_2](images/7_1_DiffuseB_2.png)](images/7_1_DiffuseB_2.png) |

        * ### DiffuseGray+
            グレイ化(彩度下げ)

            | default | DiffuseGray+ |
            | :- | :- |
            | [![7_1_Diffuse_0](images/7_1_Diffuse_0.png)](images/7_1_Diffuse_0.png) | [![7_1_DiffuseGray_1](images/7_1_DiffuseGray_1.png)](images/7_1_DiffuseGray_1.png) |

    * ### 表情操作パネル 右下  
        ライティング(Specular)の色調補正  
        ※ 画像はEnvDiffLightを下げてスペキュラのみ表示してます。

        * ### SpecularR+ / SpecularG+ / SpecularB+
            RGB加算

            | default | SpecularR+ | SpecularG+ | SpecularB+ |
            | :- | :- | :- | :- |
            | [![7_1_Specular_0](images/7_1_Specular_0.png)](images/7_1_Specular_0.png) | [![7_1_SpecularR_1](images/7_1_SpecularR_1.png)](images/7_1_SpecularR_1.png) | [![7_1_SpecularG_1](images/7_1_SpecularG_1.png)](images/7_1_SpecularG_1.png) | [![7_1_SpecularB_1](images/7_1_SpecularB_1.png)](images/7_1_SpecularB_1.png) |

        * ### SpecularR- / SpecularG- / SpecularB-
            RGB減算

            | default | SpecularR- | SpecularG- | SpecularB- |
            | :- | :- | :- | :- |
            | [![7_1_Specular_0](images/7_1_Specular_0.png)](images/7_1_Specular_0.png) | [![7_1_SpecularR_2](images/7_1_SpecularR_2.png)](images/7_1_SpecularR_2.png) | [![7_1_SpecularG_2](images/7_1_SpecularG_2.png)](images/7_1_SpecularG_2.png) | [![7_1_SpecularB_2](images/7_1_SpecularB_2.png)](images/7_1_SpecularB_2.png) |

        * ### SpecularGray+
            グレイ化(彩度下げ)

            | default | DiffuseGray+ |
            | :- | :- |
            | [![7_1_Specular_0](images/7_1_Specular_0.png)](images/7_1_Specular_0.png) | [![7_1_SpecularGray_1](images/7_1_SpecularGray_1.png)](images/7_1_SpecularGray_1.png) |


Sky Hemisphere
-----
　ハイ、ミッド、ローで色が変えられるスカイボックスです。スカイボックスなので、設定した色でライティングされます。単色やグラデーションの背景の代わりにもなります。  
デフォルトの設定では白色になります。  
「Main」タブは表示用、「EnvLightMap」タブはライティング用。

![7_2_SkyHemisphere](images/7_2_SkyHemisphere.png)

※ 図は視野角45°、EnvRotateZで回転、メインライトはオフにしています。

* ### ファイル一覧  
        
    | ファイル名           | 設定先タブ  | 説明 |
    | :------------------- | :---------: | :--- |
    | Sky with box.conf    | ――        | Sky Hemisphereの初期設定<br>Sky with box.fxに取り込まれる<br>デフォルトではコントローラーを使う設定になっている |
    | Sky with box.fx      | Main        | pmxを入れた時にデフォルトで設定される |
    | Sky with box.pmx     | ――        | スカイボックスのモデル兼コントローラー |
    | Sky with lighting.fx | EnvLightMap | ライティング用 |

* ### 使い方  
    1.  `Sky with box.pmx`をMMDに追加します。  
        「Main」タブには`Sky with box.fx`、「MaterialMap」には`Materials\material_skybox.fx`が割り当てられます。  
    2.  MMDの「モデル描画順」で一番上に。  
        (これはスカイボックス共通の操作)
    3.  `Sky with lighting.fx`を「EnvLightMap」に割り当てます。
    4.  コントローラーで色等を調整します。  
        色を付ける時はまず彩度のモーフを調整するといいでしょう。

* ### コントローラの説明
    * ### 表情操作パネル 左上  

        トップの色調整

        | 名称         | 機能 |
        | :----------- | :--- |
        | TopH+<br>TopS+<br>TopV+<br>TopV- | トップのH(色相)S(彩度)V(明度)の調整 |
        | TopExponent+<br>TopExponent-     | トップからミッドへの色のグラデーション幅を調整 |

    * ### 表情操作パネル 右上  
        ミッドの色調整

        | 名称         | 機能 |
        | :----------- | :--- |
        | MediumH+<br>MediumS+<br>MediumV+<br>MediumV-| ミッドのH(色相)S(彩度)V(明度)の調整 |

    * ### 表情操作パネル 左下  
        ボトムの色調整

        | 名称         | 機能 |
        | :----------- | :--- |
        | BottomH+<br>BottomS+<br>BottomV+<br>BottomV- | ボトムのH(色相)S(彩度)V(明度)の調整 |
        | BottomExponent+<br>BottomExponent-           | ボトムからミッドへの色のグラデーション幅を調整 |

    * ### 表情操作パネル 右下  
        環境光

        | 名称         | 機能 |
        | :----------- | :--- |
        | EnvDiffLight+<br>EnvDiffLight-         | アルベドに対して影響を及ぼす光の強さ |
        | EnvSpecLight+<br>EnvSpecLight-         | スペキュラに対して影響を及ぼす光の強さ |
        | EnvSSSLight+<br>EnvSSSLight-           | サブサーフェスに対して影響を及ぼす光の強さ |
        | EnvRotateX<br>EnvRotateY<br>EnvRotateZ | スカイボックスの回転。 |

* ### Sky with box.confの説明  
    　Sky with box.confを編集することにより、カスタム設定でSky Hemisphereを使う事ができます。（`USE_CUSTOM_PARAMS`に`1`を設定した場合。この場合、コントローラーは無視される。）  
    　よく使う設定は、`Sky with box.fx`と`Sky with box.conf`を別名で保存するか、フォルダを丸ごとコピーして設定を書き換えることをお奨めします。

    | 設定                                               | 説明                                                             |
    | :------------------------------------------------- | :--------------------------------------------------------------- |
    | #define USE_CUSTOM_PARAMS 0                        | カスタムパラメータの設定を使うか。<br>`0` ：使わない（コントローラーの設定を使う）<br>`1` ：使う（コントローラーの設定は無視される）             |
    | #define USE_RGB_COLORSPACE 0                       | 色の指定はRGBか。<br>`0` ：No(HSVを指定)<br>`1` ：Yes(RGBを指定) |
    | static const float3 TopColor = float3(1, 0, 1);    | トップの色指定。<br> USE_RGB_COLORSPACEの設定でHSVかRGBを設定。  |
    | static const float3 BottomColor = float3(1, 0, 1); | ミッドの色指定。<br> USE_RGB_COLORSPACEの設定でHSVかRGBを設定。  |
    | static const float3 MediumColor = float3(1, 0, 1); | ボトムの色指定。<br> USE_RGB_COLORSPACEの設定でHSVかRGBを設定。  |
    | static const float TopExponent = 4.0;              | トップからミッドへの色のグラデーション幅を調整                   |
    | static const float BottomExponent = 0.5;           | ボトムからミッドへの色のグラデーション幅を調整                   |


Sky Night
-----
　Sky Hemisphereに星空が追加されたもの。  
デフォルト設定ではSky Hemisphereと異なり黒色になります。

![7_3_SkyNight](images/7_3_SkyNight.png)

※ 図は視野角45°、メインライトはオフにしています。

* ### ファイル一覧  
    「Main」タブは表示用、「EnvLightMap」タブはライティング用。

    | ファイル名           | 設定先タブ  | 説明 |
    | :------------------- | :---------: | :- |
    | README.jpg           | ――        | 使用例の画像
    | Sky with box.conf    | ――        | Sky Nightの初期設定<br>Sky with box.fxに取り込まれる<br>デフォルトではコントローラーを使う設定になっている<br>内容はSky Hemisphereのものと同じ
    | Sky with box.fx      | Main        | pmxを入れた時にデフォルトで設定される
    | Sky with box.pmx     | ――        | スカイボックスのモデル兼コントローラー
    | Sky with lighting.fx | EnvLightMap | ライティング用


* ### 使い方
    1.  `Sky with box.pmx`をMMDに追加します。  
        「Main」タブには`Sky with box.fx`、「MaterialMap」には`Materials\material_skybox.fx`が割り当てられます。  
    2.  MMDの「モデル描画順」で一番上に。  
            (これはスカイボックス共通の操作)
    3.  `Sky with lighting.fx`を「EnvLightMap」に割り当てます。
    4.  コントローラーで色等を調整します。

* ### コントローラの説明
    * ### 表情操作パネル 左上  

        トップの色調整

        | 名称         | 機能 |
        | :----------- | :--- |
        | TopH+<br>TopS+<br>TopV+ | トップのH(色相)S(彩度)V(明度)の調整 |
        | TopExponent+<br>TopExponent-     | トップからミッドへの色のグラデーション幅を調整 |

    * ### 表情操作パネル 右上  
        ミッドの色調整

        | 名称         | 機能 |
        | :----------- | :--- |
        | MediumH+<br>MediumS+<br>MediumV+ | ミッドのH(色相)S(彩度)V(明度)の調整 |

    * ### 表情操作パネル 左下  
        ボトムの色調整

        | 名称         | 機能 |
        | :----------- | :--- |
        | BottomH+<br>BottomS+<br>BottomV+ | ボトムのH(色相)S(彩度)V(明度)の調整 |
        | BottomExponent+<br>BottomExponent-           | ボトムからミッドへの色のグラデーション幅を調整 |

    * ### 表情操作パネル 右下  
        環境光

        | 名称         | 機能 |
        | :----------- | :--- |
        | EnvDiffLight+<br>EnvDiffLight-         | アルベドに対して影響を及ぼす光の強さ |
        | EnvSpecLight+<br>EnvSpecLight-         | スペキュラに対して影響を及ぼす光の強さ |
        | EnvSSSLight+<br>EnvSSSLight-           | サブサーフェスに対して影響を及ぼす光の強さ |
        | EnvRotateX<br>EnvRotateY<br>EnvRotateZ | スカイボックスの回転。 |

* ### Sky with box.confの説明  
    Sky Hemisphere.confと同じ内容なので、そちらを参照してください。

Time of day
-----
昼間用のスカイボックス。  
　これは、実際の屋外の空をシミュレートするために使用される**物理ベースの大気散乱モデル**です。 太陽の位置を制御するためにメインライトの位置を制御することにより、日の出から日没までのプロセスを達成することができます。  
　2種類のモデルがあり、通常版（Time of day）は流れる雲があり、軽量版（Time of day fast）には雲がありません。

| Time of day | Time of day fast |
| :- | :- |
| ![7_4_TimeOfDay](images/7_4_TimeOfDay.png) | ![7_4_TimeOfDayFast](images/7_4_TimeOfDayFast.png) |


* ### ファイル一覧  
    「Main」タブは表示用、「EnvLightMap」タブはライティング用、「FogMap」タブはフォグ用。

    | ファイル名                                   | 設定先タブ  | 説明                                            |
    | :------------------------------------------- | :---------: | :---------------------------------------------- |
    | LICENSE.txt                                  | ――        | ライセンスの書かれたファイル（CC BY-NC-SA 3.0） |
    | README.png                                   | ――        | fxファイルの設定先が記載されてる画像            |
    | Time of day fast.fx                          | Main        | 軽量版用                                        |
    | Time of day fast.pmx                         | ――        | 軽量版スカイボックスのモデル兼コントローラー    |
    | Time of day.conf                             | ――        | 設定ファイル                                    |
    | Time of day.fx                               | Main        | 通常版用                                        |
    | Time of day.pmx                              | ――        | 通常版スカイボックスのモデル兼コントローラー    |
    | Time of fog with godray with cloud caster.fx | FogMap      | フォグ用 ゴッドレイ有り クラウドキャスター有り  |
    | Time of fog with godray.fx                   | FogMap      | フォグ用 ゴッドレイ有り                         |
    | Time of fog.fx                               | FogMap      | フォグ用                                        |
    | Time of lighting.fx                          | EnvLightMap | ライティング用                                  |

* ### 使い方
    通常版
    1.  `Time of day.pmx`をMMDに追加します。  
            「Main」タブには`Time of day.fx`、「MaterialMap」には`Materials\material_2.0.fx`が割り当てられます。  
    2.  「MaterialMap」に `Materials\material_skybox.fx` を割り当てます。
    3.  MMDの「モデル描画順」で一番上に。  
            (これはスカイボックス共通の操作)
    4.  `Time of lighting.fx`を「EnvLightMap」に割り当てます。
    5.  必要があればフォグ用のfxファイルを「FogMap」タブに割り当てられます。（必要なければ割り当ては不要です）  
    6.  コントローラーで各種調整をします。  

    軽量版
    1.  `Time of day fast.pmx`をMMDに追加します。  
            「Main」タブには`Time of day fast.fx`、「MaterialMap」には`Materials\material_2.0.fx.fx`が割り当てられます。  
    2.  「MaterialMap」に `Materials\material_skybox.fx` を割り当てます。
    3.  MMDの「モデル描画順」で一番上に。  
            (これはスカイボックス共通の操作)
    4.  `Time of lighting.fx`を「EnvLightMap」に割り当てます。
    5.  必要があればフォグ用のfxファイルを「FogMap」タブに割り当てられます。（必要なければ割り当ては不要です）  
    6.  コントローラーで各種調整をします。

* ### コントローラの説明  
    ※ ミー散乱とレイリー散乱：  
    Time of dayとTime of night は、物理ベースの大気散乱モデルということで、ミー散乱とレイリー散乱の計算が行われており、コントローラの設定にも出てきます。  

    > ミー散乱は、光の波長程度以上の大きさの球形の粒子による光の散乱現象である。粒子のサイズが非常に大きくなると、ミー散乱と幾何光学の二つの手法による計算結果が類似するようになる。なお、波長に対して粒子（散乱体）が大きい場合は回折散乱が、光の波長の1/10以下になるとレイリー散乱が適用される。([wikipedia](https://ja.wikipedia.org/wiki/%E3%83%9F%E3%83%BC%E6%95%A3%E4%B9%B1)より引用)

    また、ゴッドレイや薄明光線等、光の筋が見える現象は[チンダル現象](https://ja.wikipedia.org/wiki/%E3%83%81%E3%83%B3%E3%83%80%E3%83%AB%E7%8F%BE%E8%B1%A1)の一種で、主にミー散乱によって発生します。

    * ### 表情操作パネル 左上  
        太陽と太陽光に影響を受ける大気の設定。結果的に空の色や空からの環境光に影響を与えます。

        * ### SunRadius+ / SunRadius-  
            太陽の半径を増減

            | SunRadius+ | SunRadius ±0 | SunRadius- |
            | :- | :- | :- |
            | [![7_4_SunRadius_1](images/7_4_SunRadius_1.png)](images/7_4_SunRadius_1.png) | [![7_4_SunRadius_0](images/7_4_SunRadius_0.png)](images/7_4_SunRadius_0.png) | [![7_4_SunRadius_2](images/7_4_SunRadius_2.png)](images/7_4_SunRadius_2.png) |

        * ### SunRadiance+ / SunRadiance-
            太陽の輝きを増減

            | SunRadiance+ | SunRadiance ±0 | SunRadiance- |
            | :- | :- | :- |
            | [![7_4_SunRadiance_1](images/7_4_SunRadiance_1.png)](images/7_4_SunRadiance_1.png) | [![7_4_SunRadius_0](images/7_4_SunRadius_0.png)](images/7_4_SunRadius_0.png) | [![7_4_SunRadiance_2](images/7_4_SunRadiance_2.png)](images/7_4_SunRadiance_2.png) |

        * ### SunPhase+ / SunPhase-

            | SunPhase+ | SunPhase ±0 | SunPhase- |
            | :- | :- | :- |
            | [![7_4_SunPhase_1](images/7_4_SunPhase_1.png)](images/7_4_SunPhase_1.png) | [![7_4_SunRadius_0](images/7_4_SunRadius_0.png)](images/7_4_SunRadius_0.png) | [![7_4_SunPhase_2](images/7_4_SunPhase_2.png)](images/7_4_SunPhase_2.png) |

        * ### SunTurbidity+ / SunTurbidity-

            | SunTurbidity+ | SunTurbidity ±0 | SunTurbidity- |
            | :- | :- | :- |
            | [![7_4_SunTurbidity_1](images/7_4_SunTurbidity_1.png)](images/7_4_SunTurbidity_1.png) | [![7_4_SunRadius_0](images/7_4_SunRadius_0.png)](images/7_4_SunRadius_0.png) | [![7_4_SunTurbidity_2](images/7_4_SunTurbidity_2.png)](images/7_4_SunTurbidity_2.png) |

        * ### OzoneMass+ / OzoneMass-
            オゾン層の密度。

            | OzoneMass+ | OzoneMass ±0 | OzoneMass- |
            | :- | :- | :- |
            | [![7_4_OzoneMass_1](images/7_4_OzoneMass_1.png)](images/7_4_SunTurbidity_1.png) | [![7_4_SunRadius_0](images/7_4_SunRadius_0.png)](images/7_4_SunRadius_0.png) | [![7_4_OzoneMass_2](images/7_4_OzoneMass_2.png)](images/7_4_OzoneMass_2.png) |


        * ### RayleighColorH+ / RayleighColorS+ / RayleighColorV+ / RayleighColorV-
            レイリー散乱の色の調整。空の色を調整します。

            | RayleighColorS ±0 | RayleighColorS+ |
            | :- | :- |
            | [![7_4_SunRadius_0](images/7_4_SunRadius_0.png)](images/7_4_SunRadius_0.png) | [![7_4_RayleighColorS_1](images/7_4_RayleighColorS_1.png)](images/7_4_RayleighColorS_1.png) |

        * ### RayleighHeight+ / RayleighHeight-
            レイリー散乱が起こる大気の高さ<br>デフォルトは8kn、最大24km、最小0.00001km(=1cm)

            | RayleighHeight+ | RayleighHeight ±0 | RayleighHeight- |
            | :- | :- | :- |
            | [![7_4_RayleighHeight_1](images/7_4_RayleighHeight_1.png)](images/7_4_RayleighHeight_1.png) | [![7_4_SunRadius_0](images/7_4_SunRadius_0.png)](images/7_4_SunRadius_0.png) | [![7_4_RayleighHeight_2](images/7_4_RayleighHeight_2.png)](images/7_4_RayleighHeight_2.png) |

    * ### 表情操作パネル 右上  
        環境光関連の設定

        | 名称                           | 機能 |
        | :----------------------------- | :--- |
        | EnvDiffLight+<br>EnvDiffLight- | アルベドに対して影響を及ぼす光の強さ |
        | EnvSpecLight+<br>EnvSpecLight- | スペキュラに対して影響を及ぼす光の強さ |
        | EnvSSSLight+<br>EnvSSSLight-   | サブサーフェスに対して影響を及ぼす光の強さ |

    * ### 表情操作パネル 左下  
        フォグ関連の設定（フォグ用のfxを割り当てていないと効果はありません）  
        ※ 画像は `Time of fog with godray.fx` を「FogMap」タブに割り当てています。

        * ### MiePhase+ / MiePhase-

            | MiePhase+ | MiePhase ±0 | MiePhase- |
            | :- | :- | :- |
            | [![7_4_MiePhase_1](images/7_4_MiePhase_1.png)](images/7_4_MiePhase_1.png) | [![7_4_TimeOfDay_withFog](images/7_4_TimeOfDay_withFog.png)](images/7_4_TimeOfDay_withFog.png) | [![7_4_MiePhase_2](images/7_4_MiePhase_2.png)](images/7_4_MiePhase_2.png) |

        * ### MieTurbidity+ / MieTurbidity-

            | MieTurbidity+ | MieTurbidity ±0 | MieTurbidity- |
            | :- | :- | :- |
            | [![7_4_MieTurbidity_1](images/7_4_MieTurbidity_1.png)](images/7_4_MieTurbidity_1.png) | [![7_4_TimeOfDay_withFog](images/7_4_TimeOfDay_withFog.png)](images/7_4_TimeOfDay_withFog.png) | [![7_4_MieTurbidity_2](images/7_4_MieTurbidity_2.png)](images/7_4_MieTurbidity_2.png) |

        * ### FogRange+ / FogRange-
            フォグの範囲

            | FogRange+ | FogRange ±0 | FogRange- |
            | :- | :- | :- |
            | [![7_4_FogRange_1](images/7_4_FogRange_1.png)](images/7_4_FogRange_1.png) | [![7_4_TimeOfDay_withFog](images/7_4_TimeOfDay_withFog.png)](images/7_4_TimeOfDay_withFog.png) | [![7_4_FogRange_2](images/7_4_FogRange_2.png)](images/7_4_FogRange_2.png) |

        * ### FogIntensity+ / FogIntensity-
            フォグ強度

            | FogIntensity+ | FogIntensity ±0 | FogIntensity- |
            | :- | :- | :- |
            | [![7_4_FogIntensity_1](images/7_4_FogIntensity_1.png)](images/7_4_FogIntensity_1.png) | [![7_4_TimeOfDay_withFog](images/7_4_TimeOfDay_withFog.png)](images/7_4_TimeOfDay_withFog.png) | [![7_4_FogIntensity_2](images/7_4_FogIntensity_2.png)](images/7_4_FogIntensity_2.png) |

        * ### FogDensity+ / FogDensity-
            フォグ密度

            | FogDensity+ | FogDensity ±0 | FogDensity- |
            | :- | :- | :- |
            | [![7_4_FogDensity_1](images/7_4_FogDensity_1.png)](images/7_4_FogDensity_1.png) | [![7_4_TimeOfDay_withFog](images/7_4_TimeOfDay_withFog.png)](images/7_4_TimeOfDay_withFog.png) | [![7_4_FogDensity_2](images/7_4_FogDensity_2.png)](images/7_4_FogDensity_2.png) |

        * ### FogDensityFar+ / FogDensityFar-
            遠方のフォグ密度

            | FogDensityFar+ | FogDensityFar ±0 | FogDensityFar- |
            | :- | :- | :- |
            | [![7_4_FogDensityFar_1](images/7_4_FogDensityFar_1.png)](images/7_4_FogDensityFar_1.png) | [![7_4_TimeOfDay_withFog](images/7_4_TimeOfDay_withFog.png)](images/7_4_TimeOfDay_withFog.png) | [![7_4_FogDensityFar_2](images/7_4_FogDensityFar_2.png)](images/7_4_FogDensityFar_2.png) |

    * ### 表情操作パネル 右下  
        雲の設定（Time of day fastにはありません）

        * ### Cloud+ / Cloud-
            雲の量

            | Cloud+ | Cloud ±0 | Cloud- |
            | :- | :- | :- |
            | [![7_4_Cloud_1](images/7_4_Cloud_1.png)](images/7_4_Cloud_1.png) | [![7_4_SunRadius_0](images/7_4_SunRadius_0.png)](images/7_4_SunRadius_0.png) | [![7_4_Cloud_2](images/7_4_Cloud_2.png)](images/7_4_Cloud_2.png) |

        * ### CloudTurbidity+ / CloudTurbidity-
            雲の濃さ

            | CloudTurbidity+ | CloudTurbidity ±0 | CloudTurbidity- |
            | :- | :- | :- |
            | [![7_4_CloudTurbidity_1](images/7_4_CloudTurbidity_1.png)](images/7_4_CloudTurbidity_1.png) | [![7_4_SunRadius_0](images/7_4_SunRadius_0.png)](images/7_4_SunRadius_0.png) | [![7_4_CloudTurbidity_2](images/7_4_CloudTurbidity_2.png)](images/7_4_CloudTurbidity_2.png) |

        * ### CloudSpeed+ / CloudSpeed-
            雲が流れるスピードの調整


* ### Time of day.confの説明  
    コントローラーで調整するパラメータの多くはこのファイルで設定されています。  
    * 関連資料  
        * [A Practical Analytic Model for Daylight (PDF)](https://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf)

    R = default value,G = min value for silder bar,B = max value for silder bar

    | 設定                                                                    | 対応モーフ                         | 説明 |
    | :---------------------------------------------------------------------- | :--------------------------------- | :--- |
    | static const float3 mSunRadiusParams = float3(5000, 100000, 100);       | SunRadius+<br>SunRadius-           | Sun Radius |
    | static const float3 mSunRadianceParams = float3(10, 1.0, 20.0);         | SunRadiance+<br>SunRadiance-       | Sun light power, 10.0 is normal |
    | static const float3 mSunPhaseParams = float3(0.76, 0.65, 1.0);          | SunPhase+<br>SunPhase-             | Sun concentration with its phase functions up to 0.76, 0.76 is standard |
    | static const float3 mSunTurbidityParams = float3(100, 1e-5, 500);       | SunTurbidity+<br>SunTurbidity-     | Sun turbidity
    | static const float3 mMiePhaseParams = float3(0.76, 0.65, 1.0);          | MiePhase+<br>MiePhase-             | Mie scattering with its phase functions up to 0.76, 0.76 is standard
    | static const float3 mMieHeightTopParams = float3(1.2, 1e-5, 2.4);       | MieHeight+<br>MieHeight-           | Mie scattering with its water particles up to 1.2km, 1.2km is standard
    | static const float3 mMieTurbidityParams = float3(200, 1e-5, 500);       | MieTurbidity+<br>MieTurbidity-     | Mie scattering with its wave length param
    | static const float3 mRayleighHeightParams = float3(8.0, 1e-5, 24.0);    | RayleighHeight+<br>RayleighHeight- | Rayleigh scattering with its atmosphereic up to 8.0km, 8.0km is standard
    | static const float3 mRayleighScatteringCoeff = float3(5.8e-6, 13.6e-6, 33.1e-6); | ――                      | Precomputed Rayleigh scattering coefficients for wavelength lambda
    | static const float3 mOzoneMassParams = float3(0.6e-6, 0.0, 0.9e-6) * 2.504; | OzoneMass+<br>OzoneMass-       |  |
    | static const float3 mOzoneScatteringCoeff = float3(1.36820899679147, 3.31405330400124, 0.13601728252538); | ――        |  |
    | static const float3 mFogRangeParams = float3(1, 1e-5, 10.0);            | FogRange+<br>FogRange-             | Fog range
    | static const float3 mFogIntensityParams = float3(1, 0.0, 200.0);        | FogIntensity+<br>FogIntensity-     | Fog intensity
    | static const float3 mFogDensityParams = float3(100, 0.1, 5000.0);       | FogDensity+<br>FogDensity-         | Fog density
    | static const float3 mFogDensityFarParams = float3(1e-2, 1e-5, 1e-1);    | FogDensityFar+<br>FogDensityFar-   | Fog Density Far
    | static const float3 mCloudSpeedParams = float3(0.05, 0.0, 1.0);         | CloudSpeed+<br>CloudSpeed-         | Cloud Speed
    | static const float3 mCloudTurbidityParams = float3(80, 1e-5, 200.0);    | CloudTurbidity+<br>CloudTurbidity- | Cloud Turbidity
    | static const float3 mCloudDensityParams = float3(400, 0.0, 1600.0);     | Cloud+<br>Cloud-                   | Cloud Density
    | static const float mUnitDistance = 1000;                                | ――        | Defines the unit distance of the world up to 1000, 1000 is equal to 1km
    | static const float mEarthRadius = 6360;                                 | ――        | Earth radius to 6360km
    | static const float mEarthAtmoRadius = 6420;                             | ――        | Earth radius with its atmospheric height to 6420km
    | static const float mEarthPeopleHeight = 1;                              | ――        | People reach of the earth to 1km
    | static const float3 mWaveLength = float3(680e-9, 550e-9, 450e-9);       | ――        | standard earth lambda of 680nm, 550nm, 450nm


* ### フォグ用fxファイル  
    フォグ関連のパラメータがあります。書き換えてカスタマイズすることもできます。

    | 設定項目                 | Time of fog.fx | Time of fog with godray.fx | Time of fog with godray with cloud caster.fx | 説明 |
    | :----------------------- | :-: | :-: | :-: | :- |
    | FOG_DISCARD_SKY          | 1   | ←  | ←  | フォグをスカイボックスに描画しない<br>`0`:描画する<br>`1`:描画しない(デフォルト)<br>※描画する場合、スカイボックスが最遠方になるので、デフォルト設定では白くなります。
    | FOG_WITH_GODRAY          | 0   | 1   | ←  | ゴッドレイを描画する<br>`0`:描画しない<br>`1`:描画する
    | FOG_WITH_GODRAY_SAMPLES  | 48  | ←  | ←  | ゴッドレイのサンプル数<br>数値を上げるとゴッドレイの描画が細かくなり、下げると荒くなる。
    | ATM_SAMPLES_NUMS         | 4   | ←  | ←  | 大気のサンプル数<br>上げるとフォグが濃くなったりする。
    | ATM_CLOUD_ENABLE         | 0   | ←  | 1   | (効果確認中)
    | ATM_FOG_ENABLE           | 1   | ←  | ←  | フォグを描画する<br>`1`:描画する（フォグ用の設定なので必ず `1`）
    | ATM_LIMADARKENING_ENABLE | 0   | ←  | ←  | (効果確認中)
    | FogSampleLength          | 0.9 | ←  | ←  | ゴッドレイの長さに影響を与える。

Time of night
-----
夜空用のスカイボックス。ミルキーウェイ（天の川）有り無しが用意されています。

| Time of night | Time of night without milkway |
| :- | :- |
| ![7_5_TimeOfNight](images/7_5_TimeOfNight.png) | ![7_5_TimeOfNight_without_milkway](images/7_5_TimeOfNight_without_milkway.png) |

 * ### ファイル一覧  
    「Main」タブは表示用、「EnvLightMap」タブはライティング用、「FogMap」タブはフォグ用。

    | ファイル名                       | 設定先タブ  | 説明                                            |
    | :------------------------------- | :---------: | :---------------------------------------------- |
    | LICENSE.txt                      | ――        | ライセンスの書かれたファイル（CC BY-NC-SA 3.0） |
    | README.png                       | ――        | fxファイルの設定先が記載されてる画像            | 
    | Time of fog.fx                   | FogMap      | フォグ用                                        |
    | Time of lighting.fx              | EnvLightMap | ライティング用                                  |
    | Time of night without milkway.fx | Main        | 表示用（天の川無し版）                          |
    | Time of night.conf               | ――        | 設定ファイル                                    |
    | Time of night.fx                 | Main        | 表示用                                          |
    | Time of night.pmx                | ――        | スカイボックスのモデル兼コントローラー          |

* ### 使い方
    1.  `Time of night.pmx`をMMDに追加します。  
            「Main」タブには`Time of night.fx`、「MaterialMap」には`Materials\material_2.0.fx`が割り当てられます。  
            天の川無し版を使う時は、「Main」タブに`Time of night without milkway.fx`を割り当てます。
    2.  「MaterialMap」に `Materials\material_skybox.fx` を割り当てます。
    3.  MMDの「モデル描画順」で一番上に。  
            (これはスカイボックス共通の操作)
    4.  `Time of lighting.fx`を「EnvLightMap」に割り当てます。
    5.  必要があればフォグ用のfxファイルを「FogMap」タブに割り当てられます。（必要なければ割り当ては不要です）  
    6.  コントローラーで各種調整をします。  

* ### コントローラの説明
    * ### 表情操作パネル 左上  
        月と大気の設定。

        * ### SunRadius+ / SunRadius-  
            月の大きさ（半径）を増減

            | SunRadius+ | SunRadius ±0 | SunRadius- |
            | :- | :- | :- |
            | [![7_5_SunRadius_1](images/7_5_SunRadius_1.png)](images/7_5_SunRadius_1.png) | [![7_5_TimeOfNight](images/7_5_TimeOfNight.png)](images/7_5_TimeOfNight.png) | [![7_5_SunRadius_2](images/7_5_SunRadius_2.png)](images/7_5_SunRadius_2.png) |

        * ### SunRadiance+ / SunRadiance-
            月のの輝きを増減

            | SunRadiance+ | SunRadiance ±0 | SunRadiance- |
            | :- | :- | :- |
            | [![7_5_SunRadiance_1](images/7_5_SunRadiance_1.png)](images/7_5_SunRadiance_1.png) | [![7_5_TimeOfNight](images/7_5_TimeOfNight.png)](images/7_5_TimeOfNight.png) | [![7_5_SunRadiance_2](images/7_5_SunRadiance_2.png)](images/7_5_SunRadiance_2.png) |

        * ### MiePhase+ / MiePhase-

            | MiePhase+ | MiePhase ±0 | MiePhase- |
            | :- | :- | :- |
            | [![7_5_MiePhase_1](images/7_5_MiePhase_1.png)](images/7_5_MiePhase_1.png) | [![7_5_TimeOfNight](images/7_5_TimeOfNight.png)](images/7_5_TimeOfNight.png) | [![7_5_MiePhase_2](images/7_5_MiePhase_2.png)](images/7_5_MiePhase_2.png) |

        * ### MieTurbidity+ / MieTurbidity-

            | MieTurbidity+ | MieTurbidity ±0 | MieTurbidity- |
            | :- | :- | :- |
            | [![7_5_MieTurbidity_1](images/7_5_MieTurbidity_1.png)](images/7_5_MieTurbidity_1.png) | [![7_5_TimeOfNight](images/7_5_TimeOfNight.png)](images/7_5_TimeOfNight.png) | [![7_5_MieTurbidity_2](images/7_5_MieTurbidity_2.png)](images/7_5_MieTurbidity_2.png) |

        * ### RayleighHeight+ / RayleighHeight-
            レイリー散乱が起こる大気の高さ<br>デフォルトは3kn、最大12km、最小0.00001km(=1cm)

            | RayleighHeight+ | RayleighHeight ±0 | RayleighHeight- |
            | :- | :- | :- |
            | [![7_5_RayleighHeight_1](images/7_5_RayleighHeight_1.png)](images/7_5_RayleighHeight_1.png) | [![7_5_TimeOfNight](images/7_5_TimeOfNight.png)](images/7_5_TimeOfNight.png) | [![7_5_RayleighHeight_2](images/7_5_RayleighHeight_2.png)](images/7_5_RayleighHeight_2.png) |

        * ### RayleighColorH+ / RayleighColorS+ / RayleighColorV+ / RayleighColorV-
            レイリー散乱の色の調整。空の色を調整します。

            | RayleighColorS ±0 | RayleighColorS+ |
            | :- | :- |
            | [![7_5_TimeOfNight](images/7_5_TimeOfNight.png)](images/7_5_TimeOfNight.png) | [![7_5_RayleighColorS_1](images/7_5_RayleighColorS_1.png)](images/7_5_RayleighColorS_1.png) |


    * ### 表情操作パネル 右上  
        環境光の設定

        | 名称                           | 機能                                       |
        | :----------------------------- | :----------------------------------------- |
        | EnvDiffLight+<br>EnvDiffLight- | アルベドに対して影響を及ぼす光の強さ       |
        | EnvSpecLight+<br>EnvSpecLight- | スペキュラに対して影響を及ぼす光の強さ     |
        | EnvSSSLight+<br>EnvSSSLight-   | サブサーフェスに対して影響を及ぼす光の強さ |

    * ### 表情操作パネル 左下
        フォグ関連の設定（フォグ用のfxを割り当てていないと効果はありません）  
        スカイボックスにはフォグは描画されません。
        ※ 画像は `Time of fog.fx` を「FogMap」タブに割り当てています。

        * ### FogRange+ / FogRange-
            フォグの範囲

            | FogRange+ | FogRange ±0 | FogRange- |
            | :- | :- | :- |
            | [![7_5_FogRange_1](images/7_5_FogRange_1.png)](images/7_5_RayleighHeight_1.png) | [![7_5_TimeOfNight_with_fog](images/7_5_TimeOfNight_with_fog.png)](images/7_5_TimeOfNight_with_fog.png) | [![7_5_FogRange_2](images/7_5_FogRange_2.png)](images/7_5_FogRange_2.png) |

        * ### FogDensity+ / FogDensity-
            フォグ密度

            | FogDensity+ | FogDensity ±0 | FogDensity- |
            | :- | :- | :- |
            | [![7_5_FogDensity_1](images/7_5_FogDensity_1.png)](images/7_5_FogDensity_1.png) | [![7_5_TimeOfNight_with_fog](images/7_5_TimeOfNight_with_fog.png)](images/7_5_TimeOfNight_with_fog.png) | [![7_5_FogDensity_2](images/7_5_FogDensity_2.png)](images/7_5_FogDensity_2.png) |

    * ### 表情操作パネル 右下  
        星と流星の設定

        * ### StarSaturation+ / StarSaturation-
            星の彩度

            | StarSaturation+ | StarSaturation ±0 | StarSaturation- |
            | :- | :- | :- |
            | [![7_5_StarSaturation_1](images/7_5_StarSaturation_1.png)](images/7_5_StarSaturation_1.png) | [![7_5_TimeOfNight_without_milkway](images/7_5_TimeOfNight_without_milkway.png)](images/7_5_TimeOfNight_without_milkway.png) | [![7_5_StarSaturation_2](images/7_5_StarSaturation_2.png)](images/7_5_StarSaturation_2.png) |

        * ### StarBrightness+ / StarBrightness-
            星の明るさ

            | StarBrightness+ | StarBrightness ±0 | StarBrightness- |
            | :- | :- | :- |
            | [![7_5_StarBrightness_1](images/7_5_StarBrightness_1.png)](images/7_5_StarBrightness_1.png) | [![7_5_TimeOfNight_without_milkway](images/7_5_TimeOfNight_without_milkway.png)](images/7_5_TimeOfNight_without_milkway.png) | [![7_5_StarBrightness_2](images/7_5_StarBrightness_2.png)](images/7_5_StarBrightness_2.png) |

        * ### Meteor+ / Meteor-
            流星の明るさ

            | Meteor+ | Meteor ±0 | Meteor- |
            | :- | :- | :- |
            | [![7_5_Meteor_1](images/7_5_Meteor_1.png)](images/7_5_Meteor_1.png) | [![7_5_TimeOfNight_without_milkway](images/7_5_TimeOfNight_without_milkway.png)](images/7_5_TimeOfNight_without_milkway.png) | [![7_5_Meteor_2](images/7_5_Meteor_2.png)](images/7_5_Meteor_2.png) |

* ### Time of night.confの説明  
    コントローラーで調整するパラメータの多くはこのファイルで設定されています。

    R = default value,G = min value for silder bar,B = max value for silder bar

    | 設定                                                                    | 対応モーフ                         | 説明 |
    | :---------------------------------------------------------------------- | :--------------------------------- | :--- |
    | static const float3 mSunRadiusParams = float3(1, 0.0, 10);              | SunRadius+<br>SunRadius-           | Sun Radius
    | static const float3 mSunRadianceParams = float3(5, 1.0, 10.0);          | SunRadiance+<br>SunRadiance-       | Sun light power, 10.0 is normal
    | static const float3 mMiePhaseParams = float3(0.76, 0.65, 1.0);          | MiePhase+<br>MiePhase-             | Defines sun light concentration
    | static const float3 mMieTurbidityParams = float3(200, 1e-5, 500);       | MieTurbidity+<br>MieTurbidity-     | Defines sun light turbidity
    | static const float3 mMieHeightTopParams = float3(1.2, 1e-5, 2.4);       | (MieHeight+<br>MieHeight-)         | Mie scattering with its water particles up to 1.2km, 1.2km is standard
    | static const float3 mRayleighHeightTopParams = float3(3.0, 1e-5, 12.0); | RayleighHeight+<br>RayleighHeight- | Rayleigh scattering with its atmosphereic up to 8.0km, 8.0km is standard
    | static const float3 mFogRangeParams = float3(2, 1e-5, 10.0);            | FogRange+<br>FogRange-             | Fog range
    | static const float3 mFogDensityParams = float3(100, 0.1, 5000.0);       | FogDensity+<br>FogDensity-         | Fog density
    | static const float3 mStarSaturationParams = float3(0.3, 0.0, 1.0);      | StarSaturation+<br>StarSaturation- | Star Saturation
    | static const float3 mStarBrightnessParams = float3(2, 0, 5.0);          | StarBrightness+<br>StarBrightness- | Star Brightness
    | static const float3 mMeteorParams = float3(1, 0, 2.0);                  | Meteor+<br>Meteor-                 | Meteor
    | static float3 mWaveLength = float3(690e-9,650e-9,575e-9);               | ――                               | earth lambda

* ### フォグ用fxファイル 
    Time of day と違いパラメータ設定はありません。

-----

<small> Model : Hatsune Miku V4X Model by Digitrevx / 唄川町(うたがわまち) by シロ / モブ港ステージセット by Tansoku102cm </small>