# 1.はじめに

　[ray-mmd](https://github.com/ray-cast/ray-mmd/) はRuiさん(Githubのアカウントはray-cast)が作成した、MikuMikuDance(MMD)の拡張機能であるMikuMikuEffect(MME)用のエフェクトの一種で、Ruiさん曰く、「プロジェクトの目的は、MikuMikuDanceで物理ベースのレンダリングを作成することです。」とのことです。  

　従来のエフェクトは単機能の物が多く、それらを組み合わせて使用することが一般的ですが、ray-mmdではいくつかの機能（シェーダーや影、複数光源、ポストエフェクトなど）をまとめた統合型のエフェクトと言ってもいいと思います。（個人的にはレンダラーと言ってもいいと思います。）  

　統合型、またはその見た目（レンダリング結果）から激重なのでは？と思われるかもしれませんが、ExcellentShadowとAutoLuminanceを同時に扱えるPCであれば大丈夫かと思います。とは言え、ある程度快適に操作するにはゲーミングPCと呼ばれるようなグラフィックカードを搭載したPCの方が良いと思います。  

　このドキュメントでは、いくつかの章に渡ってray-mmdの使い方や機能を解説していこうと思います。しかしながら、個人で調べた物なので間違いや説明不足などがあると思います。その際には Issue や Twitter などで教えてもらえると助かります。 

　使用しているバージョンは将来的に1.4.0になるであろうdevelopingブランチ（開発中のバージョン）で、最新の機能を試すことが出来ますが、開発中であるがゆえに機能の変更や追加が多い事に注意してください。

## ray-mmdの機能（一部）
* ray-mmdには下記のような機能があります。
    * 物理ベースのマテリアル  
    * クリアコートマテリアル
    * 布マテリアル
    * 異方性鏡面反射
    * 近似表面下散乱(サブサーフェス・スキャタリング)
    * クック・トーランスの微小面鏡面BRDF（GGX）とバーレー拡散BRDF
    * 多光源（ポイントライト、スポットライト、太陽光、アリアライト、IES）
    * IESライトプロファイル（ポイントライトとスポットライト）
    * ソフトシャドウ（PCF, VSM, PSSM）
    * HDRリニアライティング
    * ボリュームライト(ポイントライトとスポットライト。IESもサポート)
    * ボリュームフォグ(キューブと球状)
    * ライトシャフトエフェクト(薄明光線とかゴッドレイとか呼ばれるているもの)
    * 近似大気霧と大気中の光の散乱
    * グランドフォグ
    * RGBTエンコードに基づくスカイボックス
    * RGBTエンコードに基づくイメージベースライティング
    * スクリーンスペースリフレクション(SSR)
    * スクリーンスペースアンビエントオクルージョン(SSAO)
    * スクリーンスペースサブサーフェススキャッタリング(SSSSS)
    * DOF(Depth Of Field) ポストエフェクト
    * ブルーム ポストエフェクト
    * アイアダプテーション (目の適応) ポストエフェクト
    * トーンマッピング ポストエフェクト(ACES-like,Reinhard,Hable,Hejl2015,NaughtyDog)
    * カラーバランス ポストエフェクト
    * FXAA ポストエフェクト
    * SMAA ポストエフェクト

* ## 1.3.xからの主な変更点
    * Depth Of Field（DOF：被写界深度）のサポート
    * トゥーンマテリアルのサポート
    * Support for edge line shading
    * マテリアル : gbufferの最適化と改善
    * マテリアル : Cloth（布）の改善
    * マテリアル : AOマップを使用した時のスキンの改善 ([preview](https://raw.githubusercontent.com/ray-cast/ray-mmd/developing/Shader/screenshots/ao.jpg))
    * シャドウ : 品質の最適化と改善 (PSSM1 ～ PSSM4のタブを持つようになり、太陽光による影の計算に使われる)
    * Time of day : SunPhase と SunTurbidity の追加伊
    * Vignette と ColorDispersion の削除。FilmGrain を使用して下さい。

* ## システム要件
    * MikuMikuDance : Ver.926(x64) (MMD本体のアンチエイリアスは使わない)
    * MikuMikuEffect : Ver.037(x64)
    * DirectX9とシェーダーモデル3.0対応のグラフィックカード

* ## 用語について
    * モデル：  
    　MMDの世界では一般的に、ステージモデル、背景モデルを「ステージ」、その他キャラクターや乗り物などを「モデル」と呼んでいますが、このドキュメントではそれら全てを（広義の意味で）「モデル」と記載しています。

    * 専門用語について：  
    　専門的な用語が多く出てきますが、全てを解説するのは難しいので、適宜web検索等で調べることをお奨めします。

-----

<small> ※「ray-mmdの機能」と「1.3.xからの変更点」、「システム要件」は、ray-mmdの [readme.md](https://github.com/ray-cast/ray-mmd) からの翻訳。</small>

<small> ※ 本ドキュメントではMacBook Air (11-inch, Mid 2011 i5 1.6GHz,RAM 4GB,Intel HD Graphics 3000)にWindows7 Pro 64bit,MMD Ver.9.26(x64),MME Ver.0.37(x64)という構成で確認しています。</small>

