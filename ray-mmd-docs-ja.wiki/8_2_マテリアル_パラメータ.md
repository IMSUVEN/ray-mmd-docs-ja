マテリアル パラメータ 
========

 (`material\readme.md`からの翻訳。意訳が多いので原文の英語版も参照することをお奨めします。デフォルト値は `material_2.0.fx` のものです。) 

###### [English](https://github.com/ray-cast/ray-mmd/blob/1.5.0/Materials/README.md) &nbsp; &nbsp; &nbsp; [中文文档](https://github.com/ray-cast/ray-mmd/blob/1.5.0/Materials/README_chs.md)

このドキュメントは `Ray-MMD` のマテリアル設定の各パラメータについて書かれています。物理ベースレンダリング（PBR）は、急速に普及している物理学の周りのレンダリングパイプラインです。PBRのマテリアル（物理ベースのマテリアル）には3つの形態があります。アルベド/スムースネス（滑らかさ）/メタルネス（金属性）パイプラインを提示します。アルベド/ラフネス（粗さ）/メタルネス（金属度）でないのは、ラフネスを理解して使用することは容易では無いからです。また、ディフューズ（拡散色）/スペキュラ（反射）/グロス（光沢）パイプラインで無いのは、PBRの用語ではないからです。  

material_2.0.fxを複製・編集することで新しいマテリアルを作成することができます。また、さまざまなテクスチャを作成したい場合は、dDO、nDO、Substance Designer、Substance Painter、PhotoshopなどPBR用のソフトウェアを使うことで、独自のマテリアルを作成するのに役立ちます。

<!---
This document is designed to help those who wanted to quickly get up to speed in Ray-MMD, the physically-based-rendering is a rendering pipeline around the physics that has rapidly gained popularity, there are three forms of PBR's material (physically-based material), we'll be present the albedo/smoothness/metalness pipeline, and not the albedo/roughness/metalness, because of the roughness does not be easy to understand and to use, and not the diffuse/specular/gloss pipeline, because it's not PBR's term, and then i'll go over all of the entries commonly used in Ray-MMD and also attach links to the wiki for more details, you can create a new material by duplicate a material_2.0.fx
-->

ALBEDO(アルベド):
------
　`Albedo`(アルベド)は`base color`(ベースカラー)とも呼ばれ、材質の全体的な色を定義します。３つのカラーチャンネル（RGB）を使用し、アルベドマップはsRGB色空間で正規化された値であり、`0.0`から`1.0`の値が設定されます。  

* ##### ALBEDO_MAP_FROM  
    アルベドの取得元を決定します。  
    `ALBEDO_MAP_FROM`には下記に示す`code`(数値)を設定して、マテリアルの色を決定します。(デフォルト 3)。  

    `0` . `const float3 albedo = 1.0`にて設定された`linear-color`がアルベドに設定されます。（モデルに設定されている拡散色やテクスチャマップは使わない。）  
    `1` . `ALBEDO_MAP_FILE`にテクスチャマップの相対または絶対パスを記載することにより、`srgb-image` (bmp, png, jpg, tga, dds)をアルベドに設定できます。  
    （モデルに設定されている拡散色やテクスチャマップは使わない。）  
    `2` . `ALBEDO_MAP_FILE`に`animation srgb-image` (gif, apng)の相対または絶対パスを記載することにより、アニメーションさせたマップをアルベドに設定できます。  
    `3` . `pmx`モデルに設定された`Texture`を使用します。  
    `4` . `pmx`モデルに設定された`Sphere map`を使用します。  
    `5` . `pmx`モデルに設定された`Toon map`を使用します。  
    `6` . `extension`フォルダにある`DummyScreen.x`を経由して`avi`または`screen`を使用します。  
    `7` . `pmx`モデルに設定された`Ambient Color`(環境色)を使用します。  
    `8` . `pmx`モデルに設定された`Specular Color`(反射色)を使用します。  
    `9` . `pmx`モデルに設定された`Specular Power`(反射強度)を使用します。(smoothnessでのみ有効。その他の`_MAP_FROM`、例えば`ALBEDO_MAP_FROM`ではエラーとなる。)  

    注意：ファイルパスに日本語が含まれる場合はマテリアルファイルの文字エンコーディングはShift-JISでなければならない。これはMMEの仕様によるもの。  

* ##### ALBEDO_MAP_UV_FLIP
    `ALBEDO_MAP_UV_FLIP`に設定した`code`(数値)によってテクスチャをX軸、Y軸、または両方で反転させます。

    `0` . 反転しない(デフォルト)  
    `1` . `X`軸で反転  
    `2` . `Y`軸で反転  
    `3` . `X`軸と`Y`軸で反転  

* ##### ALBEDO_MAP_APPLY_SCALE  
    `ALBEDO_MAP_APPLY_SCALE`に設定した`code`(数値)に従って、`ALBEDO_MAP_FROM`で決定した色(map values)に対して`albedo`の数値で演算を行います。

    `0` . 演算しない(デフォルト)  
    `1` . map values * albedo (乗算)  
    `2` . map values ^ albedo (累乗)  

* ##### ALBEDO_MAP_APPLY_DIFFUSE  
    テクスチャカラーに`PMX`モデルに設定されている`diffuse`(拡散色)の数値で乗算を行います。  

    `0` . 乗算しない  
    `1` . 乗算する(デフォルト)  

* ##### ALBEDO_MAP_APPLY_MORPH_COLOR  
    テクスチャカラーと`PMX`モデルに設定されている`morph`(`R+`/`G+`/`B+`)の値で乗算を行います。  
    （`R+`/`G+`/`B+`モーフの値が参照できればいいので、モーフの中身は空でもかまわない。）

    `0` . 乗算しない(デフォルト)  
    `1` . 乗算する  

* ##### ALBEDO_MAP_FILE  
    `ALBEDO_MAP_FROM`に`1`または`2`を設定した場合、`ALBEDO_MAP_FILE`にマップファイルパスの記載が必要です。

    ##### ファイルパスの記載例 :
    ##### 1. xxx.png と material.fx が同じフォルダにある場合
    * `#define ALBEDO_MAP_FILE "xxx.png"`
    ##### 2. xxx.png が material.fx の親フォルダにある場合
    * `#define ALBEDO_MAP_FILE "../xxx.png"`
    ##### 3. xxx.png が material.fx の親フォルダ配下の別のフォルダにある場合  
    * `#define ALBEDO_MAP_FILE "../(other path)/xxx.png"`
    ##### 4. xxx.png がデスクトップや他のドライブにある場合（相対パスではなく絶対パスを使う場合）
    * `#define ALBEDO_MAP_FILE "C:/Users/(User Name)/Desktop/xxx.png"`

    ##### Tips:
    * `"../"` カレントフォルダの上のフォルダ（親フォルダ）を意味します。
    * `"\\"`(Shift-JISでは半角の￥￥：エスケープシーケンスを利用したパスの表記法) の代わりに `"/"` が使用できます。

* ##### const float3 albedo = 1.0;
    `ALBEDO_MAP_FROM`に`0`または`ALBEDO_MAP_APPLY_SCALE`に`1`を設定した場合、数値を設定する必要があります。  
    (他のケースでは参照されないことを意味します。)
    
    ##### 設定例:
    ##### 1. 正規化された数値(0.0～1.0)で赤色を表現するには、以下のように設定します。数値は順にR,G,Bを示します。
    * `const float3 albedo = float3(1.0, 0.0, 0.0);`
    ##### 2. 正規化されていない数値(0～255：ペイントソフトなどで見られる数値)で赤色を表現するには、以下のように設定します。(255.0で割るので結果的には正規化された数値となります。)
    * `const float3 albedo = float3(255.0, 0.0, 0.0) / 255.0;`
    ##### 3. ペイントツールなどのカラーピッカーを使いモニター上で選択した色の数値を使う場合、`sRGB色空間`から`リニア色空間`に変換する必要があります。（参考：[物理ベースレンダリング -リニアワークフロー編 (2)-](http://tech.cygames.co.jp/archives/2339/)）
    * 正規化された数値(0.0～1.0)を変換する場合:
      * `const float3 albedo = pow(float3(r, g, b), 2.2);`
    * 正規化されていない数値(0～255)を変換する場合:
      * `const float3 albedo = pow(float3(r, g, b) / 255.0, 2.2);`

* #### albedoMapLoopNum
    アルベドのテクスチャマップをタイル状に繰り返す回数を設定します。  
    `X`方向と`Y`方向、それぞれ異なる回数を設定する場合は、`albedoMapLoopNum = float2(x, y)`のように記述することができます。

    ##### 設定例:
    ##### 1. `X`と`Y`が同じ数値の場合:
    * `const flaot albedoMapLoopNum = 2.0;`  
    OR
    * `const flaot2 albedoMapLoopNum = 2.0;`
    ##### 2. `X`と`Y`が異なる数値の場合:
    * `const flaot2 albedoMapLoopNum = float2(2.0, 3.0);`

SubAlbedo(サブ アルベド):
--------------
* ##### ALBEDO_SUB_ENABLE
    `ALBEDO_SUB_ENABLE`に下記の`code`(数値)を設定することで、アルベドの色を調整することが出来ます。  

    `0` . None(SubAlbedoを使用しない：デフォルト)  
    `1` . albedo * albedoSub(乗算)  
    `2` . albedo ^ albedoSub(累乗)  
    `3` . albedo + albedoSub(加算)  
    `4` . melanin(メラニン)  
    `5` . Alpha Blend(アルファブレンド)  

* ##### ALBEDO_SUB_MAP_FROM 
    SubAlbedoの色の取得元を決定します。  

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### ALBEDO_SUB_MAP_UV_FLIP
    サブアルベドのテクスチャをX軸、Y軸、または両方で反転させます。  

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### ALBEDO_SUB_MAP_APPLY_SCALE
    `ALBEDO_SUB_MAP_FROM`で決定した色(map values)に対して`albedoSub`の数値で演算を行います。  

    設定する`code`(数値)は [ALBEDO_MAP_APPLY_SCALE](#ALBEDO_MAP_APPLY_SCALE) を参照してください。

* ##### ALBEDO_SUB_MAP_FILE
    `ALBEDO_SUB_MAP_FROM`に`1`または`2`を設定した場合、`ALBEDO_SUB_MAP_FILE`にマップファイルパスの記載が必要です。  
    記載方法については、[ALBEDO_MAP_FILE](#ALBEDO_MAP_FILE) を参照してください。

* ##### const float3 albedoSub = 0.0 ~ 1.0;
    `ALBEDO_SUB_MAP_FROM`に`0`または`ALBEDO_SUB_MAP_APPLY_SCALE`に`1`または`2`を設定した場合、数値を設定する必要があります。  

    設定例についてはconst float3 albedoを参照して下さい。

* ##### const float2 albedoSubMapLoopNum = 0.0 ~ inf; 
    サブアルベドのテクスチャマップをタイル状に繰り返す回数を設定します。  

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

Alpha(透過):
----------------
　マテリアルの透過設定を行います。不透明なオブジェクトには影響しません。

* ##### ALPHA_MAP_FROM
    透過値の取得元を決定します。  

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### ALPHA_MAP_UV_FLIP
    透過用のマップをX軸、Y軸、または両方で反転させます。  

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### ALPHA_MAP_SWIZZLE
    下記の`code`(数値)に従って、参照するマップのチャンネルを設定します。

    `0` .  `R` チャンネルを参照する  
    `1` .  `G` チャンネルを参照する  
    `2` .  `B` チャンネルを参照する  
    `3` .  `A` チャンネルを参照する(デフォルト)  

* ##### ALPHA_MAP_FILE
    `ALPHA_MAP_UV_FLIP`に`1`または`2`を設定した場合、`ALPHA_MAP_FILE`にマップファイルパスの記載が必要です。 

    記載方法については、[ALBEDO_MAP_FILE](#ALBEDO_MAP_FILE) を参照してください。

* ##### const float alpha = 0.0 ~ 1.0;
    `ALPHA_MAP_FROM`に`0`を設定した場合、数値を設定する必要があります。

* ##### const float2 alphaMapLoopNum = 0.0 ~ inf;
    透過テクスチャマップをタイル状に繰り返す回数を設定します。  

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

Normal（ノーマル、法線）:
-------------
　マテリアルにノーマルマップを追加します。

　ノーマルマップは、メッシュの見た目の凸凹を変更し、光の角度を変更して細部に影を追加します。このマップは、殆どの場合、３つのチャンネルを持つタンジェントスペース（接線）のマップを使用します。古いパイプラインや、帯域幅など幾つかの要因で異なるタイプの法線マップを使用する事もできます。詳細については、NORMAL_MAP_TYPEを参照してください。  
リアルタイムで光を計算するためには、すべての入力モデルが法線を持たなければならず、それ以外の場合は白いエッジの問題が発生します。モデルにいくつかの白い辺が見えたら、`PMXEditor`でモデルに使用されるすべての法線が「長さ０」（XYZが０）でないことを確認し、修正します。  
(訳者注：モデルの頂点法線の長さが正しくない事に起因する問題だと思われます。)

* ##### NORMAL_MAP_FROM
    ノーマルマップの取得元を決定します。  

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### NORMAL_MAP_TYPE
    ノーマルマップの種類を設定します。(デフォルト０)  
    UE4 [docs](https://docs.unrealengine.com/latest/INT/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/index.html) for `PerturbNormalLQ` and `PerturbNormalHQ` を参考にしてください。

    `0` . Calculate world-space normal from RGB tangent-space map.  
    `1` . Calculate world-space normal from RG  compressed tangent-space map.  
    `2` . Calculate world-space normal from Grayscale bump map by `PerturbNormalLQ` (Low  Quality). It has no effect on small objects.  
    `3` . Calculate world-space normal from Grayscale bump map by `PerturbNormalHQ` (High Quality).  
    `4` . Calculate world-space normal from RGB world-space map.  
* ##### NORMAL_MAP_UV_FLIP
    ノーマルマップをX軸、Y軸、または両方で反転させます。  

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### NORMAL_MAP_FILE
    `NORMAL_MAP_FROM`に`1`または`2`を設定した場合、`NORMAL_MAP_FILE`にノーマルマップファイルパスの記載が必要です。  

    記載方法については、[ALBEDO_MAP_FILE](#ALBEDO_MAP_FILE) を参照してください。

* ##### const float normalMapScale = 0 ~ inf;
    ノーマルの倍率を設定します。（デフォルト1.0）  
    （倍率であることに注意）

* ##### const float normalMapLoopNum = 0 ~ inf;
    ノーマルマップをタイル状に繰り返す回数を設定します。

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

SubNormal（サブノーマル）:
-------------
* ##### NORMAL_SUB_MAP_FROM
    サブノーマルマップの取得元を決定します。  

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### NORMAL_SUB_MAP_TYPE
    ノーマルマップの種類を設定します。(デフォルト０)

    設定する`code`(数値)は [NORMAL_MAP_TYPE](#NORMAL_MAP_TYPE) を参照してください。

* ##### NORMAL_SUB_MAP_UV_FLIP
    サブノーマルマップをX軸、Y軸、または両方で反転させます。  

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### NORMAL_SUB_MAP_FILE
    `NORMAL_SUB_MAP_TYPE`に`1`または`2`を設定した場合、`NORMAL_SUB_MAP_FILE`にノーマルマップファイルパスの記載が必要です。  

    記載方法については、[ALBEDO_MAP_FILE](#ALBEDO_MAP_FILE) を参照してください。

* ##### const float normalSubMapScale = 0.0 ~ inf;
    サブノーマルの倍率を設定します。（デフォルト1.0）  
    （倍率であることに注意）

* ##### const float normalSubMapLoopNum = 0.0 ~ inf;
    サブノーマルマップをタイル状に繰り返す回数を設定します。

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

Smoothness(スムースネス、滑らかさ):
-------------
　スムースネス（滑らかさ）を決定します。  

スムースネスマップは、表面の滑らかさを決定します。これは常にモノラルチャンネルのグレースケールマップです。ほとんどの場合、モノラルチャンネルのグレースケールマップ（の画像ファイル）は使用されていません。そのため、デフォルトチャネルとしてRGBAマップのRチャネルのみが使用されます。また、SMOOTHNESS_MAP_SWIZZLEにコードを設定することによって、どのチャンネルを参照するかを指定することもできます。  
デフォルトの値は `SpecularPower`(PMXEでは反射強度)からパラメータを取得し、 `Smoothness`に変換します。

* ##### SMOOTHNESS_MAP_FROM
    スムースネスの値の取得元を決定します。（デフォルト９）

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### SMOOTHNESS_MAP_TYPE
    スムースネスのパラメータタイプを設定します。（デフォルト0）  
    (値をスムースネスとして扱うか、ラフネス（粗さ）として扱うか)

    `0` . `Smoothness` (from Frostbite / CE5 textures)  
    　　　値をスムースネスとして扱う。
    `1` . Calculate `Smoothness` from Roughness by `1.0 - Roughness ^ 0.5` (from UE4/GGX/SubstancePainter2)  
    　　　値をノンリニアなラフネスとして扱う。
    `2` . Calculate `Smoothness` from Roughness by `1.0 - Roughness`       (from UE4/GGX/SubstancePainter2 with linear roughness)  
    　　　値をリニアなラフネスとして扱う。

* ##### SMOOTHNESS_MAP_UV_FLIP
    スムースネスマップをX軸、Y軸、または両方で反転させますす。  

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### SMOOTHNESS_MAP_SWIZZLE
    参照するマップのチャンネルを設定します。

    設定する`code`(数値)は [ALPHA_MAP_SWIZZLE](#ALPHA_MAP_SWIZZLE) を参照してください。

* ##### SMOOTHNESS_MAP_APPLY_SCALE
    `SMOOTHNESS_MAP_FROM`で取得した値(map values)に対して`smoothness`の数値で演算を行います。  

    設定する`code`(数値)は [ALBEDO_MAP_APPLY_SCALE](#ALBEDO_MAP_APPLY_SCALE) を参照してください。

* ##### SMOOTHNESS_MAP_FILE
    `SMOOTHNESS_MAP_FROM`に`1`または`2`を設定した場合、`SMOOTHNESS_MAP_FILE`にマップファイルパスの記載が必要です。  

    記載方法については、[ALBEDO_MAP_FILE](#ALBEDO_MAP_FILE) を参照してください。

* ##### const float smoothness = 0.0 ~1.0;
    `SMOOTHNESS_MAP_FROM`に`0`または`SMOOTHNESS_MAP_APPLY_SCALE`に`1`または`2`を設定した場合、数値を設定する必要があります。  

    設定例についてはconst float3 albedoを参照して下さい。

* ##### const float smoothnessMapLoopNum = 1.0;
    スムースネスマップをタイル状に繰り返す回数を設定します。  

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

Metalness(メタルネス、メタリック):
-------------
　メタルネスマップは、反射率を決定する1つの方法であり、テクスチャのどの部分が金属であるかを決定します。鏡面ハイライトマップなどの古いパイプラインの代わりに使用されます。メタルネスマップは常にモノラルチャンネルのグレースケールマップですが、グレースケールマップ（の画像ファイル）はほとんど使用されず、デフォルトチャンネルとしてRGBAマップのRチャンネルのみが使用されます。また、METALNESS_MAP_SWIZZLEにコードを設定することで、どのチャンネルを参照するかを指定することもできます。  

* ##### METALNESS_MAP_FROM
    メタルネス値の取得元を決定します。

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### METALNESS_MAP_UV_FLIP
    メタルネスマップをX軸、Y軸、または両方で反転させます。

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### METALNESS_MAP_SWIZZLE
    参照するマップのチャンネルを設定します。

    設定する`code`(数値)は [ALPHA_MAP_SWIZZLE](#ALPHA_MAP_SWIZZLE) を参照してください。

* ##### METALNESS_MAP_APPLY_SCALE
    `METALNESS_MAP_FROM`で取得した値(map values)に対して`metalness`の数値で演算を行います。 

    設定する`code`(数値)は [ALBEDO_MAP_APPLY_SCALE](#ALBEDO_MAP_APPLY_SCALE) を参照してください。

* ##### METALNESS_MAP_FILE
    `METALNESS_MAP_FROM`に`1`または`2`を設定した場合、`METALNESS_MAP_FILE`にマップファイルパスの記載が必要です。  

    記載方法については、[ALBEDO_MAP_FILE](#ALBEDO_MAP_FILE) を参照してください。

* ##### const float metalness = 0.0 ~ 1.0;
    メタルネスの値を設定します。

    `METALNESS_MAP_FROM`に`0`または`METALNESS_MAP_APPLY_SCALE`に`1`または`2`を設定した場合、数値を設定する必要があります。  

* ##### const float metalnessMapLoopNum = 1.0;
    メタルネスマップをタイル状に繰り返す回数を設定します。

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

Specular(スペキュラ):
-------------
　スペキュラマップは環境およびスフィアマップではなく、モデルのベース反射率のみを変更します。 これは、反射の色を制御するために使用されます。 RGBとグレースケールの2種類の鏡面マップがあります。 メタルネスが0より大きい場合は効果がありません。 CUSTOM_ENABLEがゼロに等しくない場合、RGBタイプの鏡面マップは機能しません。 そのため、SPECULAR_MAP_TYPEにコードを設定することで、RGBではなくグレースケールマップを使用することができます。 モデルが鏡面色を反映していると感じない場合は、 const float3 specular = 0.0にゼロを設定できます。


* ##### SPECULAR_MAP_FROM
    スペキュラ値の取得元を決定します。

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### SPECULAR_MAP_TYPE
    スペキュラのタイプを設定します。

    `0` . Calculate reflection coefficient from specular color by `F(x) = 0.08*(x  )` (from UE4 textures)  
    `1` . Calculate reflection coefficient from specular color by `F(x) = 0.16*(x^2)` (from Frostbite textures)  
    `2` . Calculate reflection coefficient from specular grays by `F(x) = 0.08*(x  )` (from UE4 textures)  
    `3` . Calculate reflection coefficient from specular grays by `F(x) = 0.16*(x^2)` (from Frostbite textures)  
    `4` . Using reflection coefficient (`0.04`) instead of specular value (`0.5`), Available when `SPECULAR_MAP_FROM` at `0`  

* ##### SPECULAR_MAP_UV_FLIP
    スペキュラマップをX軸、Y軸、または両方で反転させます。

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### SPECULAR_MAP_SWIZZLE
    参照するマップのチャンネルを設定します。

    設定する`code`(数値)は [ALPHA_MAP_SWIZZLE](#ALPHA_MAP_SWIZZLE) を参照してください。

* ##### SPECULAR_MAP_APPLY_SCALE
    `SPECULAR_MAP_FROM`で取得した値(map values)に対して`specular`の数値で演算を行います。 

    設定する`code`(数値)は [ALBEDO_MAP_APPLY_SCALE](#ALBEDO_MAP_APPLY_SCALE) を参照してください。
 
* ##### SPECULAR_MAP_FILE
    `SPECULAR_MAP_FROM`に`1`または`2`を設定した場合、`SPECULAR_MAP_FILE`にマップファイルパスの記載が必要です。  

    記載方法については、[ALBEDO_MAP_FILE](#ALBEDO_MAP_FILE) を参照してください。

* ##### const float3 specular = 0.5;
    スペキュラーの値を設定します。

    `2％ '未満のものは物理的に不可能で、代わりにシャドーイングとみなされます。  
    例えば、反射係数は、 `F(x) = (x - 1)^2 / (x + 1)^2` に等しい。  
    屈折率が `1.5` である透明媒体に入射する光線を考慮すると、その結果は、 `(1.5 - 1)^2 / (1.5 + 1)^2 = 0.04` （または`4%`）と等しくなります。  
    鏡面反射係数は `F(x) = 0.08*x` に等しく、`x`が`0.5`に等しい場合、結果は`0.04`になる。  
    したがって、デフォルト値は`0.04`の係数に対しては`0.5`であり、`0.0`〜`1.0`の間のクランプされた値です。

* ##### const float2 specularMapLoopNum = 1.0;
    スペキュラマップをタイル状に繰り返す回数を設定します。

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

Occlusion(オクルージョン):
-------------
　アンビエントオクルージョン（AO）は、オクルージョン（閉塞）による環境光の減衰を近似するエフェクトです。
多くの方向からの「空の照明」は、単純にリアルタイムで影を計算することができません。
`occlusion map`と`SSAO`を使って簡単に置き換えることができます。
`diffuse`と`specular`が不要な場合は、 `const float occlusion = 1.0`にゼロを設定することもできます。

* ##### OCCLUSION_MAP_FROM
    オクルージョンの値の取得元を決定します。

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### OCCLUSION_MAP_TYPE
    オクルージョンマップのタイプを設定します。

    `0` . Fetch `ambient occlusion` from linear color-space  
    `1` . Fetch `ambient occlusion` from sRGB   color-space  
    `2` . Fetch `ambient occlusion` from linear color-space from second UV set  
    `3` . Fetch `ambient occlusion` from sRGB   color-space from second UV set  

* ##### OCCLUSION_MAP_UV_FLIP
    オクルージョンマップをX軸、Y軸、または両方で反転させます。

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### OCCLUSION_MAP_SWIZZLE
    参照するマップのチャンネルを設定します。

    設定する`code`(数値)は [ALPHA_MAP_SWIZZLE](#ALPHA_MAP_SWIZZLE) を参照してください。

* ##### OCCLUSION_MAP_APPLY_SCALE
    `OCCLUSION_MAP_FROM`で取得した値(map values)に対して`occlusion`の数値で演算を行います。 

    設定する`code`(数値)は [ALBEDO_MAP_APPLY_SCALE](#ALBEDO_MAP_APPLY_SCALE) を参照してください。

* ##### const float occlusion = 0.0 ~ 1.0;
    オクルージョンの値を設定します。

* ##### const float occlusionMapLoopNum = 0.0 ~ inf;
    オクルージョンマップをタイル状に繰り返す回数を設定します。

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

Parallax(パララックス、視差):
-------------
`height map`を使用できますが、頂点ディスプレースメントとして機能するものではありません。（パララックスマッピングはディスプレースメントマッピングではありません）

* ##### PARALLAX_MAP_FROM
    パララックスの値の取得元を決定します。

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### PARALLAX_MAP_TYPE
    パララックスマップのタイプを設定します。

    `0` . 透明度なしで計算します  
    `1` . 透明度と最良の`SSDO`で視差のオクルージョンを計算します

* ##### PARALLAX_MAP_UV_FLIP
    パララックスマップのX軸、Y軸、または両方で反転させます。  

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### PARALLAX_MAP_SWIZZLE
    参照するマップのチャンネルを設定します。

    設定する`code`(数値)は [ALPHA_MAP_SWIZZLE](#ALPHA_MAP_SWIZZLE) を参照してください。

* ##### PARALLAX_MAP_FILE
    `PARALLAX_MAP_FROM`に`1`または`2`を設定した場合、`PARALLAX_MAP_FILE`にマップファイルパスの記載が必要です。  

    記載方法については、[ALBEDO_MAP_FILE](#ALBEDO_MAP_FILE) を参照してください。

* ##### const float parallaxMapScale = 0.0 ~ inf;
    パララックスの倍率を設定します。（デフォルト1.0）  
    （倍率であることに注意）

* ##### const float parallaxMapLoopNum = 0.0 ~ inf;
     パララックスマップをタイル状に繰り返す回数を設定します。

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

Emissive(エミッシブ):
-------------
　MMDに光源（PointLightなど）を追加し、モデルの発光部の一部としてキー入力し、同じ色を光源と発光色に設定します。  
（訳者注：エミッシブは発光体表現 (発光色で光っているように見えるだけ) なので、それ自体はライト（光源）の役割を持っていません。光源を追加することによって、エミッシブから光が放射しているように見せかけることができます。）

* ##### EMISSIVE_ENABLE
    エミッシブの有効、無効を設定します。

    `0` . 無効(デフォルト)
    `1` . 有効

* ##### EMISSIVE_MAP_FROM
    エミッシブマップの取得元を決定します。  

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### EMISSIVE_MAP_UV_FLIP
    エミッシブマップをX軸、Y軸、または両方で反転させます。  

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### EMISSIVE_MAP_APPLY_SCALE
    `EMISSIVE_MAP_FROM`で決定した色(map values)に対して`emissive`の数値で演算を行います。  

    設定する`code`(数値)は [ALBEDO_MAP_APPLY_SCALE](#ALBEDO_MAP_APPLY_SCALE) を参照してください。

* ##### EMISSIVE_MAP_APPLY_MORPH_COLOR
    エミッシブのカラーと`PMX`モデルに設定されている`morph`(`R+`/`G+`/`B+`)の値で乗算を行います。

    設定する`code`(数値)は [ALBEDO_MAP_APPLY_MORPH_COLOR](#ALBEDO_MAP_APPLY_MORPH_COLOR) を参照してください。

* ##### EMISSIVE_MAP_APPLY_MORPH_INTENSITY
    エミッシブのカラーと`PMX`モデルに設定されている`morph`(`Intensity+/-`)の値で乗算を行います。

    `0` . 乗算しない(デフォルト)  
    `1` . 乗算する  

* ##### EMISSIVE_MAP_APPLY_BLINK
    点滅を使う時は、以下の`code`(数値)を設定します。

    `0` . 点滅しない(デフォルト)  
    `1` . `emissiveBlink`に記述した周期で点滅します。  
    　　　例：const float3 emissiveBlink = float3(1.0, 2.0, 3.0);  
    　　　赤は１周期、緑は２周期、青は３周期。  
    `2` . `morph controller`の`Blink`に従って点滅します。  

* ##### EMISSIVE_MAP_FILE
    `EMISSIVE_MAP_FROM`に`1`または`2`を設定した場合、`EMISSIVE_MAP_FILE`にマップファイルパスの記載が必要です。  
    記載方法については、[ALBEDO_MAP_FILE](#ALBEDO_MAP_FILE) を参照してください。

* ##### const float3 emissive = 0.0 ~ 1.0;
    `EMISSIVE_MAP_FROM`に`0`または`EMISSIVE_MAP_APPLY_SCALE`に`1`または`2`を設定した場合、数値を設定する必要があります。  

    設定例についてはconst float3 albedoを参照して下さい。

* ##### const float3 emissiveBlink = 0.0 ~ 10.0;
    `EMISSIVE_MAP_APPLY_BLINK`に`1`を設定した時に周期を設定します。

* ##### const float  emissiveIntensity = 0 ~ 100 and above
    エミッシブの倍率を設定します。（デフォルト1.0）

* ##### const float2 emissiveMapLoopNum = 0.0 ~ inf;
    エミッシブマップをタイル状に繰り返す回数を設定します。  

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

Shading Model ID(シェーディングモデルID):
-------------
　シェーディングモデルIDは、マテリアルのシェーディング方法の種類を決定します。(デフォルト0)  
デフォルト以外のIDでは、`CustomA`、`CustomB`で専用のパラメータを設定します。  

* ##### CUSTOM_ENABLE
    | ID | Material          | CustomA   | CustomB |
    | :- |:------------------|:----------|:--------|
    | 0  | Default           | Invalid    | Invalid |
    | 1  | PreIntegrated Skin| Curvature  | Transmittance color |
    | 2  | Unlit placeholder | Invalid    | Invalid |
    | 3  | Anisotropy        | Anisotropic| Shift tangent |
    | 4  | Glass             | Curvature  | Transmittance color |
    | 5  | Cloth             | Sheen      | Fuzz Color |
    | 6  | Clear Coat        | Smoothness | Invalid |
    | 7  | Subsurface        | Curvature  | Transmittance color |
    | 8  | Cel Shading       | Threshold  | Shadow color |
    | 9  | ToonBased Shading | Haredness  | Shadow color |

    ##### Tips:  
    `Subsurface`(サブサーフェス) : `curvature`(曲率) は、`opacity`(不透明度)とも呼ばれ、ぼかしの全体的な強度を定義する。 詳細については、UE4 [docs](https://docs.unrealengine.com/latest/INT/Engine/Rendering/Materials/LightingModels/SubSurfaceProfile/index.html) を参照してください。  
    `Glass`(ガラス) : In order to make refraction work, you must set alpha value of the pmx to less then `0.999`  
    `Cloth`(布) : `Sheen`は` GGX`と `InvGGX`間の補間です。詳細は [paper](http://blog.selfshadow.com/publications/s2017-shading-course/imageworks/s2017_pbs_imageworks_sheen.pdf) を参照してください。(英語)  
    `Cloth`(布) : `Fuzz Color` はsRGB色空間のフレネル反射率の f0 です。  
    `Toon`(トゥーン)  : 詳細については、 [paper](https://zhuanlan.zhihu.com/p/26409746) を参照してください。(中国語)  

* ##### CUSTOM_A_MAP_FROM
    マップの値の取得元を決定します。

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### CUSTOM_A_MAP_UV_FLIP
    マップをX軸、Y軸、または両方で反転させます。  

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### CUSTOM_A_MAP_COLOR_FLIP
    マップの階調を反転します。

    `0` . 反転しない  
    `1` . 反転する

* ##### CUSTOM_A_MAP_SWIZZLE
    参照するマップのチャンネルを設定します。

    設定する`code`(数値)は [ALPHA_MAP_SWIZZLE](#ALPHA_MAP_SWIZZLE) を参照してください。

* ##### CUSTOM_A_MAP_APPLY_SCALE
    `CUSTOM_A_MAP_FROM`で決定した値(map values)に対して`customA`の数値で演算を行います。  

    設定する`code`(数値)は [ALBEDO_MAP_APPLY_SCALE](#ALBEDO_MAP_APPLY_SCALE) を参照してください。

* ##### CUSTOM_A_MAP_FILE "custom.png"
    `CUSTOM_A_MAP_FROM`に`1`または`2`を設定した場合、`CUSTOM_A_MAP_FILE`にマップファイルパスの記載が必要です。  
    記載方法については、[ALBEDO_MAP_FILE](#ALBEDO_MAP_FILE) を参照してください。

* ##### const float customA = 0.0 ~ 1.0; (linear-space)

* ##### const float customAMapLoopNum = 1.0;
    マップをタイル状に繰り返す回数を設定します。

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

* ##### CUSTOM_B_MAP_FROM
    マップの値の取得元を決定します。

    設定する`code`(数値)は [ALBEDO_MAP_FROM](#ALBEDO_MAP_FROM) を参照してください。

* ##### CUSTOM_B_MAP_UV_FLIP
    マップをX軸、Y軸、または両方で反転させます。  

    設定する`code`(数値)は [ALBEDO_MAP_UV_FLIP](#ALBEDO_MAP_UV_FLIP) を参照してください。

* ##### CUSTOM_B_MAP_COLOR_FLIP
    マップの階調を反転します。

    `0` . 反転しない  
    `1` . 反転する  

* ##### CUSTOM_B_MAP_APPLY_SCALE
    `CUSTOM_B_MAP_FROM`で決定した値(map values)に対して`customB`の数値で演算を行います。  

    設定する`code`(数値)は [ALBEDO_MAP_APPLY_SCALE](#ALBEDO_MAP_APPLY_SCALE) を参照してください。

* ##### CUSTOM_B_MAP_FILE "custom.png"
    `CUSTOM_B_MAP_FROM`に`1`または`2`を設定した場合、`CUSTOM_B_MAP_FILE`にマップファイルパスの記載が必要です。  
    記載方法については、[ALBEDO_MAP_FILE](#ALBEDO_MAP_FILE) を参照してください。

* ##### const float3 customB = 0.0 ~ 1.0; (sRGB color-space)

* ##### const float2 customBMapLoopNum = 1.0;
    マップをタイル状に繰り返す回数を設定します。

    設定例については [albedoMapLoopNum](#albedoMapLoopNum) を参照してください。

FAQ:
--------------------
* sRGB-color と Gamma とは？
    * ほとんどの場合、ガンマは約2.2です。sRGBとガンマについては、詳細は下記のドキュメントをご覧ください。 
    * `https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch24.html`  
    * `https://en.wikipedia.org/wiki/SRGB`  

* gloss map(光沢マップ)とは？
    * Gloss map は `smoothness map` です。

* roughness map(ラフネスマップ)を使うには？
    * `SMOOTHNESS_MAP_FILE`にファイルパスを設定し、`SMOOTHNESS_MAP_TYPE` に `1` を設定します。

* melanin(メラニン)はどこに行った？
    * `ALBEDO_SUB_ENABLE`の設定に移動しました。詳細は`ALBEDO_SUB_ENABLE` を参照してください。

* 何故 `parallaxMapLoopNum` の数を増やすと、アルベド、法線などのループ数が増えますか？
    * 視差座標は「高さマップ」から計算できるので、それらは `albedo`、` normals`、 `smoothness`、` metalness`などのテクスチャにアクセスするために使われます。

    * Bacause parallax coordinates can be calculated from `height map`,that are then used to access textures with `albedo`, `normals`, `smoothness`, `metalness`, etc, In other words like fetched data (`albedo`, `normals`, etc) from parallax coordinates * `parallaxMapLoopNum` * `albedo`/`normal`/MapLoopNum
